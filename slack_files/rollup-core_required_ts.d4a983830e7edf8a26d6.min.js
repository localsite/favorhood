(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["rollup-core_required_ts"],{"0MN+":function(e,t){(function(){TS.registerModule("ui",{window_focus_changed_sig:new signals.Signal,window_unloaded_sig:new signals.Signal,onStart:function e(){$(window).bind("focus",TS.ui.onWindowFocus);$(window).bind("blur",TS.ui.onWindowBlur);$("html").bind("mousedown",function(){TS.model.ui.is_window_focused||TS.interop.console.info("FOCUS-EVENT","Mousedown while !is_window_focused");TS.ui.onWindowFocus({target:window})});var n=!!(document.hasFocus&&document.hasFocus());n?TS.ui.onWindowFocus({target:window}):TS.ui.onWindowBlur({target:window});TS.model.win_ssb_version&&$("body").addClass("desktop");t()},setUpWindowUnloadHandlers:function e(){"undefined"!==typeof window.addEventListener?window.addEventListener("beforeunload",TS.ui.onWindowUnload,false):"undefined"!==typeof document.addEventListener?document.addEventListener("beforeunload",TS.ui.onWindowUnload,false):"undefined"!==typeof window.attachEvent?window.attachEvent("onbeforeunload",TS.ui.onWindowUnload):"function"===typeof window.onbeforeunload?window.onbeforeunload=function(){TS.ui.onWindowUnload();return false}:window.onbeforeunload=TS.ui.onWindowUnload},onWindowUnload:function e(){TS.model.window_unloading=true;TS.ui.window_unloaded_sig.dispatch();TS.redux.dispatch(TS.interop.redux.models.window.setUnloading(true))},handleDraghoverstartFromWinSSB:function e(){TS.ui.file_share.handleDraghoverstartFromWinSSB()},handleDraghoverendFromWinSSB:function e(){TS.ui.file_share.handleDraghoverendFromWinSSB()},handleDropFromWinSSB:function e(t){TS.ui.file_share.handleDropFromWinSSB(t)},teamSelectionChanged:function e(){if(!window.desktop||!window.desktop.reduxHelper||!_.isFunction(window.desktop.reduxHelper.isSelectedTeam))return;if(TS.interop.environment.isSSBAndAtLeastVersion("3.2.0"))return;var t=window.desktop.reduxHelper.isSelectedTeam();TS.interop.console.info("FOCUS-EVENT","Team selection changed ("+t+")");t?n():o()},onWindowFocus:function e(t){if(t.target!==window&&t.target!==document)return;TS.model.ui.is_window_focused||TS.interop.console.info("FOCUS-EVENT","Window focused");n()},onWindowBlur:function e(t){if(t.target!==window&&t.target!==document)return;TS.model.ui.is_window_focused&&TS.interop.console.info("FOCUS-EVENT","Window blurred");o()},needToShowAtChannelWarning:function e(t,n){return TS.interop.rules.channels.shouldShowAtChannelWarning(t,TS.interop.texty.getBroadcastKeywordsFromContents(TS.interop.texty.convertContentsStringToContents(n,{highlightWords:TS.interop.prefs.getHighlightWords(),shouldRenderEmojiAsText:TS.interop.rules.emoji.shouldRenderEmojiAsText(),emojiNames:TS.emoji.legacyGetEmojiNames(),useSonicEmoji:TS.boot_data.feature_sonic_emoji,locale:TS.interop.i18n.locale})))},needToBlockAtChannelKeyword:function e(t,n,o){return TS.interop.rules.channels.checkForBlockedAtChannelKeyword(o,TS.interop.texty.getBroadcastKeywordsFromContents(TS.interop.texty.convertContentsStringToContents(t,{highlightWords:TS.interop.prefs.getHighlightWords(),shouldRenderEmojiAsText:TS.interop.rules.emoji.shouldRenderEmojiAsText(),emojiNames:TS.emoji.legacyGetEmojiNames(),useSonicEmoji:TS.boot_data.feature_sonic_emoji,locale:TS.interop.i18n.locale})))},startButtonSpinner:function t(n){TS.ui.resetButtonSpinner(n);var o=e(n);o.isLoading()||o.start()},stopButtonSpinner:function t(n,o){var a=e(n);if(a.isLoading()){a.stop();if(o){var i=$(n).find(".ladda-label").text();$(n).data("original_text",i);$(n).removeClass("").addClass("btn_success").find(".ladda-label").html('<i class="ts_icon ts_icon_check_circle_o small_right_margin"></i>'+TS.interop.i18n.t("Saved","ui")())}}},resetButtonSpinner:function t(n){var o=e(n);if(o.isLoading())return;var a=$(n).data("original_text");if(a){$(n).find(".ladda-label").text(a);$(n).removeData("original_text");$(n).removeClass("btn_success").addClass("")}},showVersionInfo:function e(){var t="version_info";var n=new Date(1e3*TS.boot_data.version_ts)+" (<b>"+TS.boot_data.version_ts+"</b>)";TS.generic_dialog.start({title:TS.interop.i18n.t("Version Info","ui")(),unique:t,body:TS.interop.i18n.t('<p>This version: {version_num}</p><p class="latest_version checking">Checking for updates&hellip;</p>',"ui")({version_num:TS.interop.i18n.safeString(n)}),show_cancel_button:false,go_button_class:"btn_outline",go_button_text:TS.interop.i18n.t("Close","ui")(),show_secondary_go_button:false,onSecondaryGo:function e(){TS.reload(false,"TS.ui.showVersionsInfo dialog")}});TS.interop.api.callExpedited("test.versionInfo").then(function(e){if(!TS.generic_dialog.is_showing||TS.generic_dialog.current_setting.unique!=t)return;var n=TS.generic_dialog.div.find(".latest_version");n.removeClass("checking");var o=e.data.version_ts.toString()==TS.boot_data.version_ts.toString();if(o)n.html(TS.interop.i18n.t("Your copy of Slack is up-to-date! {tada_emoji}","ui")({tada_emoji:TS.interop.i18n.safeString(TS.emoji.graphicReplace(":tada:"))}));else{TS.generic_dialog.div.find(".btn.dialog_secondary_go").removeClass("hidden").text("Update");var a=e.data.min_version_ts>TS.boot_data.version_ts;a?n.html(TS.interop.i18n.t("An important new version of Slack is available. {sparkles_emoji}","ui")({sparkles_emoji:TS.interop.i18n.safeString(TS.emoji.graphicReplace(":sparkles:"))})):n.html(TS.interop.i18n.t("A newer version of Slack is available. {sparkles_emoji}","ui")({sparkles_emoji:TS.interop.i18n.safeString(TS.emoji.graphicReplace(":sparkles:"))}))}}).catch(_.noop)},setThemeClasses:function e(){$("body").removeClass("dense_theme light_theme");if("dense"===TS.prefs.getPref("theme"))$("body").addClass("dense_theme");else{if("light"!==TS.prefs.getPref("theme")){TS.error("no theme?");return}$("body").addClass("light_theme")}TS.prefs.getPref("avatars")?$("body").removeClass("no_avatars"):$("body").addClass("no_avatars")}});var e=function e(t){var n=$(t).data("ladda");if(!n){n=Ladda.create(t);$(t).data("ladda",n)}return n};var t=function e(){$("body").on("click.plastic_date",'input[type="text"][data-plastic-type="date"]',function(e){var t=$(e.target);if(!t.pickmeup)return;var n=!!t.closest("#fs_modal").length||$(this).data("flat");t.pickmeup({flat:n,first_day:window.moment.localeData().firstDayOfWeek()||0,hide_on_select:true,min:$(this).data("min")||null,max:$(this).data("max")||null,format:$(this).data("format")||"Y-m-d",class_name:"plastic_date_picker",hide:function e(){t.trigger("input")},title_format:"ja-JP"===TS.interop.i18n.locale?"Y\u5e74B":"B Y",locale:{days:window.moment.weekdays(),daysShort:window.moment.weekdaysShort(),daysMin:window.moment.weekdaysMin(),months:window.moment.months(),monthsShort:window.moment.monthsShort()}}).pickmeup("show");if(n){var o=t.data("picker");if(!o){o=$('<div class="position_relative no_margin no_padding"></div>');t.data("picker",o)}t.after(o.append(t.find(".pickmeup").detach()))}}).on("keydown.plastic_date",'input[type="text"][data-plastic-type="date"]',function(e){var t=$(e.target);if(!t.pickmeup)return;window.document.activeElement===e.target&&t.pickmeup("hide")})};var n=function e(){var t=TS.interop.redux.models.window.isWindowFocused(TS.redux.getState());if(t)return;TS.model.shift_key_pressed=false;TS.model.insert_key_pressed=false;TS.model.ui.is_window_focused=true;TS.ui.window_focus_changed_sig.dispatch(true);TS.redux.dispatch(TS.interop.redux.models.window.updateFocus(true))};var o=function e(){var t=TS.interop.redux.models.window.isWindowFocused(TS.redux.getState());if(false===t)return;TS.model.shift_key_pressed=false;TS.model.insert_key_pressed=false;TS.model.ui.is_window_focused=false;TS.ui.window_focus_changed_sig.dispatch(false);TS.redux.dispatch(TS.interop.redux.models.window.updateFocus(false))}})()},"7pQh":function(e,t,n){var o=n("lSNA");var a=n("cDf5");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),true).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}(function(){TS.registerModule("emoji",{onStart:function e(){T.forEach(function(e){TS.emoji.spliceSkinToneVariationsIntoAnArrayOfEmojiNames(e.emoji_names)});var t=true;b=TS.utility.throttleFunc(b,3e3,t);window._&&(k=_.debounce(k,3e3,{leading:false,trailing:t}))},isValidName:function t(n){if(!n)return false;n=TS.emoji.stripWrappingColons(n).toLowerCase();if(TS.boot_data.feature_sonic_emoji){if(!TS.interop.emoji.isValidEmojiText(n))return false;return n}if("undefined"===typeof e[n])return false;return n},isEmojiNameSafe:function e(t){if(TS.boot_data.feature_sonic_emoji)return TS.interop.rules.emoji.isEmojiNameSafe(t);var n=TS.emoji.legacyGetColonsRx();if(!n||!n.source)return false;var o=":"+t+":";var a=new RegExp("^"+n.source+"$");return a.test(o)},substringMatchesName:function e(t,n){if(TS.boot_data.feature_sonic_emoji)return;if(!t||!n||!_.isString(t)||!_.isString(n))return false;if("::"===n)return false;var o=":"===n.charAt(0);var a=":"===n.slice(-1);n=TS.emoji.stripWrappingColons(n.toLowerCase());if(!n)return true;if(o&&a)return n===t;if(o)return t.slice(0,n.length)===n;if(a)return t.slice(-1*n.length)===n;var i=-1!==t.indexOf(n);if(i)return true;return false},emojiMatchesTerm:function e(t,n,o){if(TS.boot_data.feature_sonic_emoji)return;if(!t||!n)return false;var a=TS.emoji.nameToBaseName(t.display_name||t.name);a=TS.interop.i18n.deburr(a);n=TS.emoji.normalizeSearchTerm(n);if(TS.emoji.substringMatchesName(a,n))return true;var i=TS.interop.i18n.deburr(t.display_names||t.names);t.display_names&&t.display_names!==t.names&&(i+=" "+t.names);var r=i.split(" ");for(var s=0;s<r.length;s+=1)if(TS.emoji.substringMatchesName(TS.emoji.nameToBaseName(r[s]),n))return true;return-1!==_.indexOf(o,a)},normalizeSearchTerm:function e(t){if(!t||!_.isString(t))return;t=t.toLowerCase();t=TS.interop.i18n.deburr(t);t=t.replace(/['\u02bc\u2019]/g,"'");return t},nameToBaseName:function e(t){if(!_.isString(t))return"";t=TS.emoji.stripLocalizedSkinTone(t);t=TS.emoji.stripWrappingColons(t);return t},stripLocalizedSkinTone:function e(t){var n=/::skin-tone-[2-6]:/g;t=t.replace(n,":");if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){var o=TS.emoji.getLocalSkinToneName();n=new RegExp("::"+o+"-[2-6]:","g")}t=t.replace(n,":");return t},stripWrappingColons:function e(t){if(!t)return"";t="string"===typeof t?t:""+t;if(":"===t[0]){if(":"===t[t.length-1])return t.slice(1,t.length-1);return t.slice(1,t.length)}if(":"===t[t.length-1])return t.slice(0,t.length-1);return t},nameToCanonicalName:function e(t){t=TS.emoji.stripWrappingColons(t);if(!t)return"";t=String(t).toLowerCase();if(TS.boot_data.feature_sonic_emoji)return TS.interop.emoji.getCanonicalEmojiName(t)||t;var n=function(){var e=t.split("::");if(2!=e.length)return"";t=e[0];return"::"+e[1]}();return(f()[t]||t)+n},emojiHasAliases:function e(t){if(TS.boot_data.feature_sonic_emoji)return;return-1!==t.names.indexOf(" ")},addCustomEmoji:function e(t,n,o){if(TS.boot_data.feature_sonic_emoji)return;y(t,n,o)},removeCustomEmoji:function e(t,n){if(TS.boot_data.feature_sonic_emoji)return;var o;y(t,o,n)},renameCustomEmoji:function e(t,n,o,a){if(TS.boot_data.feature_sonic_emoji)return;TS.emoji.removeCustomEmoji(t,a);TS.emoji.addCustomEmoji(n,o,a)},ingestCustoms:function e(t){if(TS.boot_data.feature_sonic_emoji)return;TS.model.all_custom_emoji.length=0;TS.model.emoji_complex_customs={};i={};var n;var o;var r=[];_.forOwn(S.data,function(e){r.push.apply(r,e[3])});function s(e){return S.map.colons.hasOwnProperty(e)||r.indexOf(e)>=0}function l(e){var t=TS.emoji.maybeGetCanonicalEmojiName(e);return t!==e}_.forOwn(t,function(e,t){if("object"===a(e)){TS.model.emoji_complex_customs[t]=e;S.data[t]=[[],null,null,[t],null,null,null,e.apple];S.map.colons[t]=t;TS.model.all_custom_emoji.push(t)}else{if(0===e.indexOf("alias:"))return;if(s(t)){TS.error("can't ingest custom emoji :"+t+": because that already exists");return}if(!TS.emoji.isEmojiNameSafe(t)){TS.error("can't ingest custom emoji :"+t+": because it's invalid");return}S.data[t]=[[],null,null,[t],null,null,null,e];S.map.colons[t]=t;TS.model.all_custom_emoji.push(t)}});_.forOwn(t,function(e,t){if("object"===a(e)||0!==e.indexOf("alias:"))return;if(s(t)){TS.error("can't ingest custom emoji :"+t+": because that already exists");return}if(!TS.emoji.isEmojiNameSafe(t)){TS.error("can't ingest custom emoji :"+t+": because it's invalid");return}n=e.replace("alias:","");o=S.data.hasOwnProperty(n)&&S.data[n];if(o){o[3].push(t);S.map.colons[t]=n;return}n=S.map.colons.hasOwnProperty(n)&&S.map.colons[n];o=S.data.hasOwnProperty(n)&&S.data[n];if(o){o[3].push(t);S.map.colons[t]=n;return}TS.boot_data&&TS.boot_data.feature_tinyspeck&&TS.warn('alias for "'+t+'":"'+e+'" not recognized')});TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&_.forOwn(t,function(e,t){l(t)&&(i[t]=true)});TS.model.all_custom_emoji=TS.model.all_custom_emoji.sort();if(S&&S.inits){delete S.inits.emoticons;S.init_emoticons()}m=p()},bootEmoji:function e(){o=o?o.finally(TS.emoji.setUpEmoji):TS.emoji.setUpEmoji();return o},setUpEmoji:function e(){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.makeSafeForTimeout(TS.redux.dispatch(TS.interop.redux.actions.loadEmoji()));return new Promise(function(e){if(!S){TS.boot_data.feature_tinyspeck&&TS.log(250,"BOOT: Done setting up emoji, there was nothing to do");return e()}var t=function t(){S.buildKeywordIndex();w();TS.boot_data.feature_tinyspeck&&TS.log(250,"BOOT: Done setting up emoji");e()};v();if(!TS.boot_data.page_needs_custom_emoji)return t();if(!TS.boot_data.page_needs_custom_emoji_fresh){var n=TS.storage.fetchCustomEmoji();"calls"!==TS.boot_data.app||TS.model.emoji_cache_ts||(TS.model.emoji_cache_ts=_.get(TS.storage.fetchCustomEmoji(),"cache_ts"));if(n&&TS.model.emoji_cache_ts==n.cache_ts){TS.model.did_we_load_with_emoji_cache=true;TS.emoji.ingestCustoms(n.data);return t()}}TS.boot_data.feature_tinyspeck&&TS.log(250,"BOOT: Fetching emoji list before setting up emoji");var o=function e(n,o){if(!n||!o.emoji)return t();TS.model.emoji_cache_ts=o.cache_ts;TS.storage.storeCustomEmoji({data:o.emoji,cache_ts:TS.model.emoji_cache_ts});TS.boot_data.feature_fix_custom_emoji_errors&&v();TS.emoji.ingestCustoms(o.emoji);t()};TS.interop.api.call("emoji.list",{include_complex_values:1}).then(function(e){var t=e.data,n=e.args,a=e.request_id;var i=true;o(i,t,n,a);return{data:t,args:n,request_id:a}}).catch(function(e){var t=e.data,n=e.args,a=e.request_id;var i=false;o(i,t,n,a);return{data:t,args:n,request_id:a}})})},resetUpEmoji:function e(){TS.storage.storeCustomEmoji("");b()},maybeRemakeMenuListsIfFrequentsChanged:function e(){if(TS.boot_data.feature_sonic_emoji)return;var n=u();TS.utility.areSimpleObjectsEqual(n,t,"maybemakeMenuLists")||d(n)},replaceFrecentlyUsed:function e(){if(TS.boot_data.feature_sonic_emoji)return;var t=C();if(!t.length)return;if(!_.isEqual(t,n)){d(t);n=t}},makeMenuLists:function n(){if(TS.boot_data.feature_sonic_emoji)return;TS.model.emoji_groups.length=0;TS.model.emoji_names.length=0;e={};var o=_.cloneDeep(T);var a=j();a&&a.length&&o.push({display_name:TS.interop.i18n.t("Custom","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_slack"></i></span>',tab_icon:"ts_icon_slack",tab_icon_name:"slack",name:"slack",emoji_names:a});t=u();o.unshift({name:"mine",display_name:TS.interop.i18n.t("Frequently Used","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_clock_o"></i></span>',tab_icon:"ts_icon_clock_o",tab_icon_name:"clock_o",emoji_names:t});var r;var s;var l=[];for(r=0;r<o.length;r+=1)l=l.concat(o[r].emoji_names);var c={};Object.keys(S.data).forEach(function(t){var n=S.data[t][3];var o=TS.emoji.isIdxSkinToneModifiable(t);n.forEach(function(n,a,i){var r=n;var s=_.compact(i);s.length!==i.length&&TS.error('Emoji "'+n+'" contains bad record(s) in "names" prop');TS.model.emoji_names.push(n);e[n]=true;if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){r=TS.emoji.maybeGetLocalizedEmojiName(n);s=i.map(function(e){return TS.emoji.maybeGetLocalizedEmojiName(e)})}c[n]={html:TS.emoji.graphicReplace(":"+n+":"),name:":"+n+":",names:":"+i.join(": :")+":",display_name:":"+r+":",display_names:":"+s.join(": :")+":"};TS.model.emoji_map.push({id:"E"+t+(a>0?"_alias_"+a:""),name:n,name_with_colons:":"+n+":",display_name:r,is_skin:o,is_emoji:true});if(o){c[n].is_skin=true;c[n].skin_tone_id="1";S.skin_tones.forEach(function(o){if(!g(t,o))return;var a=S.data[o];var l=a[3][0];var _=n+"::"+l;TS.model.emoji_names.push(_);e[_]=true;var u=":"+_+":";var d=i.map(function(e){return e+"::"+l});var m=u;var f=d;if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){var p=TS.emoji.maybeGetLocalizedEmojiName(l);m=":"+r+"::"+p+":";f=s.map(function(e){return e+"::"+p})}c[_]={is_skin:true,skin_tone_id:l.substr(-1,1),html:TS.emoji.graphicReplace(u),name:u,names:":"+d.join(": :")+":",display_name:m,display_names:":"+f.join(": :")+":"}})}})});h=c;TS.model.emoji_map=_.uniqBy(TS.model.emoji_map,"id");TS.boot_data.feature_emoji_by_id&&(TS.model.emoji_map_by_id=_.keyBy(TS.model.emoji_map,"id"));for(r=0;r<l.length;r+=1){var d=l[r];c[d]||TS.info(d+" not in cat_map?")}var m;var f;var p;var b;for(r=0;r<o.length;r+=1){m=o[r];f=[];p=null;b="";m.tab_icon_html&&(b=m.tab_icon_html);for(s=0;s<m.emoji_names.length;s+=1){p=c[m.emoji_names[s]];f.push(p);if(b)continue;m.emoji_names[s]==m.name&&(b=p.html)}p=f[0];TS.model.emoji_groups.push({name:m.name,display_name:m.display_name,tab_html:b||p.html,tab_icon:m.tab_icon,tab_icon_name:m.tab_icon_name,items:f})}var v=TS.emoji.getCurrentSheetUrl();if(O("ss_emojis")&&v){var w=new Image;w.onload=function(){w.onload=null;w.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";w=null};w.src=v}TS.model.emoji_names.sort();TS.emoji.friendlyReorder();var y=TS.model.emoji_names.indexOf("ok");var k=TS.model.emoji_names.indexOf("ok_hand");TS.model.emoji_names[y]="ok_hand";TS.model.emoji_names[k]="ok";TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&_.each(i,function(e,t){var n=_.remove(TS.model.emoji_map,{name:t});TS.boot_data.feature_emoji_by_id&&n.forEach(function(e){delete TS.model.emoji_map_by_id[e.id]})})},friendlyReorder:function e(){if(TS.boot_data.feature_sonic_emoji)return;var t=[{filter:"th",first:"thumbsup",second:"thumbsdown"},{filter:"po",first:"point_up",second:"point_down"}];t.forEach(function(e){var t=_.reduce(TS.model.emoji_names,function(t,n,o){if(0===n.indexOf(e.filter)){var a=TS.model.all_custom_emoji.indexOf(n)>-1;var i=!a&&0===n.indexOf(e.first);var r=!a&&!i&&0===n.indexOf(e.second);t.emoji.push({name:n,is_first:i,is_second:r});t.indexes.push(o)}return t},{indexes:[],emoji:[]});t.emoji=_.orderBy(t.emoji,["is_first","is_second","name"],["desc","desc","asc"]);_.forEach(t.emoji,function(e,n){var o=t.indexes[n];TS.model.emoji_names[o]=e.name})})},isIdxSkinToneModifiable:function e(t){if(TS.boot_data.feature_sonic_emoji)return;return g(t,S.skin_tones[0])},isNameSkinToneModifiable:function e(t){if(TS.boot_data.feature_sonic_emoji)return TS.interop.emoji.isEmojiNameSkinToneModifiable(t);t=TS.emoji.stripWrappingColons(t);t=String(t).toLowerCase();var n=S.map.colons[t];return TS.emoji.isIdxSkinToneModifiable(n)},renderIconFallback:function e(t){var n=t.replace(/:/g,"");return'<ts-icon class="emoji-sizer ts_icon_info_circle ts_icon_inherit" title="'+n+'"></ts-icon>'},sonicGenerateEmojiHtml:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!TS.boot_data.feature_sonic_emoji)return null;var n=TS.interop.emojiComponent.mapStateToProps(t)||{};var o=r({},t,{},n);var a=o.displayText,i=o.url,s=o.renderAsText,l=o.iconInTextMode,c=o.className,u=o.includeTitle,d=o.includeText;if(s||!i){if(l)return TS.emoji.renderIconFallback(a);return a}var m=["emoji","emoji-sizer",c];return TS.templates.sonic_emoji({url:i,displayText:d&&a,displayTitle:u&&TS.emoji.stripWrappingColons(a),emojiClassNames:_.compact(m).join(" ")})},sonicReplaceEmojiInString:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var o=TS.interop.utility.getColonsRx();return t.replace(o,function(e){return TS.emoji.sonicGenerateEmojiHtml(r({},n,{text:e}))})},graphicReplace:function e(t,n){if(!t)return"";n=n||{};if(TS.boot_data.feature_sonic_emoji){var o=n.emojiSize;!o&&n.jumbomoji&&(o=TS.interop.emojiComponent.EmojiSizes.LARGE);return TS.emoji.sonicReplaceEmojiInString(t,{emojiSize:o,forceDisplay:n.force_img,stopAnimations:n.stop_animations,className:n.jumbomoji?"emoji-only":void 0,iconInTextMode:n.show_icon_for_emoji_in_as_text_mode&&TS.interop.emoji.isValidEmojiText(t),includeTitle:n.include_title,includeText:n.include_text})}var a=S;if(n.show_icon_for_emoji_in_as_text_mode&&TS.emoji.isValidName(t))return TS.emoji.renderIconFallback(t);a.init_env();var i=a.text_mode;var r=a.include_title;var s=a.include_text;var l=a.supports_css;var _=a.allow_skin_tone_squares;if(n.force_img&&n.obey_emoji_mode_pref){n.obey_emoji_mode_pref=false;TS.error("obey_emoji_mode_pref now set to FALSE because options.force_img is TRUE")}if(n.force_style&&n.obey_emoji_mode_pref){n.obey_emoji_mode_pref=false;TS.error("obey_emoji_mode_pref now set to FALSE because options.force_style is "+n.force_style)}a.text_mode=n.obey_emoji_mode_pref&&TS.interop.rules.emoji.shouldRenderEmojiAsText();if(n.force_style){TS.emoji.setEmojiMode(n.force_style);a.use_sheet=false}a.include_title=!!n.include_title;a.include_text=!!n.include_text;a.supports_css=!n.force_img;a.allow_skin_tone_squares=!n.no_skin_tone_squares;var c=a.replace_colons(t,{stop_animations:n.stop_animations});n.jumbomoji&&(c=c.replace("emoji-sizer","emoji-sizer emoji-only"));n.force_style&&TS.emoji.setEmojiMode();a.text_mode=i;a.include_title=r;a.include_text=s;a.supports_css=l;a.allow_skin_tone_squares=_;return c},replaceColons:function e(t){if(TS.boot_data.feature_sonic_emoji)return null;if(t.indexOf(":")<0)return t;return S.replace_colons(t)},maybeUnifiedReplace:function e(t){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.replaceTextEmojiWithNative(t);if("unified"!==S.replace_mode)return t;return S.replace_colons_with_unified(t)},legacyReplaceEmoticons:function e(t){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.replaceEmoticonsWithColons(t);return S.replace_emoticons_with_colons(t)},getLocalSkinToneName:function e(){var t="skin-tone";TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(t=TS.boot_data.feature_sonic_emoji?TS.emoji.maybeGetLocalizedEmojiName("skin-tone"):TSFEmoji.getLocalSkinToneName(TS.interop.i18n.locale));return t},getChosenSkinTone:function e(t){var n=parseInt(O("preferred_skin_tone"),10);if(!n||"1"==n||!_.includes([2,3,4,5,6],n))return"";var o=t?TS.emoji.getLocalSkinToneName():"skin-tone";return o+"-"+n},getChosenSkinToneModifier:function e(t){var n=TS.emoji.getChosenSkinTone(t);if(!n)return"";return":"+n+":"},setEmojiMode:function e(t){if(TS.boot_data.feature_sonic_emoji)return;var n=["google","apple"];t=t||TS.interop.rules.emoji.getEmojiMode();S.text_mode="as_text"===t;S.do_emoticons=!!O("graphic_emoticons");S.allow_native=false;S.use_sheet=function(){if(!O("ss_emojis"))return false;return!!TS.boot_data.page_needs_custom_emoji}();var o=t;"as_text"==t&&(o=TS.interop.rules.emoji.getEmojiMode({forceDisplay:true}));S.img_set=_.includes(n,o)?o:"apple";if(!TS.model.emoji_complex_customs)return;for(var a in TS.model.emoji_complex_customs){if(!S.data[a])continue;S.data[a][7]=TS.model.emoji_complex_customs[a][S.img_set]}},legacyGetColonsRx:function e(){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.getColonsRx();return S&&S.rx_colons},legacyGetEmojiNames:function e(){if(TS.boot_data.feature_sonic_emoji)return TS.interop.redux.models.emoji.getAllEmojiNames(TS.redux.getState());return _.map(TS.emoji.getEmojiMap(),"name")},getEmojiByName:function e(t){if(TS.boot_data.feature_sonic_emoji)return;if(!t)return;return _.find(TS.model.emoji_map,{name:t})},getEmojiById:function e(t){if(TS.boot_data.feature_sonic_emoji)return;if(TS.boot_data.feature_emoji_by_id)return TS.model.emoji_map_by_id[t];var n=_.find(TS.model.emoji_map,{id:t});if(!n){TS.warn("no emoji ob found for "+t);return}return n},getEmojiMap:function e(){if(TS.boot_data.feature_sonic_emoji)return;return TS.model.emoji_map},getEmojiForSpaces:function e(){var t={emoji:{}};if(TS.boot_data.feature_sonic_emoji){t.emoticonEmojiNames=TS.interop.utility.getEmoticonMap();t.replace=function(e){var t=TS.interop.utility.replaceNativeEmojiWithText(e);if(!t)return e;return TS.emoji.maybeGetCanonicalEmojiString(t)}}else{t.emoticonEmojiNames=S.emoticons_data;t.sheetSize=S.sheet_size;t.sheetPath=TS.emoji.getCurrentSheetUrl();t.replace=function(){var e=S.colons_mode;S.colons_mode=true;var t=S.replace_unified.apply(S,arguments);TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(t=TS.emoji.maybeGetCanonicalEmojiString(t));S.colons_mode=e;return t}}TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(t.getLocalEmojiString=function(e){if(!e)return"";return TS.emoji.maybeGetLocalizedEmojiName(e)||e});if(TS.boot_data.feature_sonic_emoji){var n=TS.interop.emojiComponent.EmojiSizes.MEDIUM;var o=TS.interop.rules.emoji.getEmojiMode({forceDisplay:true});TS.emoji.legacyGetEmojiNames().forEach(function(e){var a=TS.interop.emoji.getEmojiUrl({text:e,emojiMode:o,emojiSize:n});O("a11y_animations")||(a=TS.utility.getImgProxyURLWithOptions(a,{emoji:true}));t.emoji[e]=a})}else Object.keys(S.data).forEach(function(e){var n=S.data[e];var o=n[3];var a=n[4];var i=n[5];var r=n[7];var s;if(null!==a&&null!==i)s=[a,i];else{if(!r){TS.error('WTF, _emoji "'+e+'" is missing coords or and a url, or something!');return}s=false===O("a11y_animations")?TS.utility.getImgProxyURLWithOptions(r,{emoji:true}):r}o.forEach(function(e){t.emoji[e]=s})});return t},getCurrentSheetUrl:function e(){if(TS.boot_data.feature_sonic_emoji)return null;return S.img_sets[S.img_set].sheet},getCurrentImagePath:function e(){if(TS.boot_data.feature_sonic_emoji)return null;return S.img_sets[S.img_set].path},hasUnifiedEmoji:function e(t){if(TS.boot_data.feature_sonic_emoji){if(!_.isString(t))return false;var n=TS.interop.utility.getNativeEmojiRx();return-1!==t.search(n)}S.init_unified();return-1!==t.search(S.rx_unified)},test:function e(){return{emoji:S}},spliceSkinToneVariationsIntoAnArrayOfEmojiNames:function e(t){if(TS.boot_data.feature_sonic_emoji)return;var n=0;t.concat().forEach(function(e,o){var a=S.map.colons[e];var i=S.data.hasOwnProperty(a)&&S.data[a];if(!i)return;S.skin_tones.forEach(function(i){if(!g(a,i))return;var r=S.data[i];var s=r[3][0];var l=e+"::"+s;if(-1!==t.indexOf(l))return;n+=1;var _=n+o;t.splice(_,0,l)})})},findByKeyword:function e(t){if(TS.boot_data.feature_sonic_emoji)return null;return S.findByKeyword(t)},getObsoletedEmojiNameFromModernEmojiName:function e(t){if(TS.boot_data.feature_sonic_emoji)return;if(!t)return null;var n=TS.emoji.stripWrappingColons(t);var o=/(::skin-tone-[2-6])/;var a=n.match(o);var i=a?a[1]:"";var r=n.replace(o,"");var s=S.map.colons[r];if(!s)return null;var l=S.obsoletes_data[s];var _=l&&l[4]&&l[4][0];if(_&&_!=r)return _+i;return null},maybeGetCanonicalEmojiString:function e(t){if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.emojiTranslation.convertEmojiInStringToCanonical({locale:TS.interop.i18n.locale,text:t});return TSFEmoji.translateEmojiStringToCanonical(t,TS.interop.i18n.locale,{include_emoji_5:true})}return t},maybeGetLocalizedEmojiString:function e(t){if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.emojiTranslation.convertEmojiInStringToLocalized({locale:TS.interop.i18n.locale,text:t});return TSFEmoji.translateEmojiStringToLocal(t,TS.interop.i18n.locale,{include_emoji_5:true})}return t},maybeGetLocalizedEmojiName:function e(t){if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.emojiTranslation.getLocalizedEmojiName({locale:TS.interop.i18n.locale,name:t});return TSFEmoji.getLocalEmojiString(t,TS.interop.i18n.locale,{include_emoji_5:true})}return t},maybeGetCanonicalEmojiName:function e(t){if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.emojiTranslation.getCanonicalEmojiName({locale:TS.interop.i18n.locale,name:t});return TSFEmoji.getCanonicalEmojiString(t,TS.interop.i18n.locale,{include_emoji_5:true})}return t},MISSING_EMOJI_HTML:'<span class="emoji-outer emoji-sizer emoji-bg-contain" style="background-image: url('+cdn_url+'/80588/img/emoji_missing.png);"></span>'});var e={};var t;var n;var o;var i={};var s="E";var l=36;var c=50;var u=function e(){var t;var n={};_.each(_.keys(TS.model.emoji_use),function(e){t=TS.emoji.nameToCanonicalName(e.split("::")[0]);if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&x(t))return;n.hasOwnProperty(t)||(n[t]=0);n[t]+=TS.model.emoji_use[e]});TS.dir(777,n,"condensed emoji names:");var o=Object.keys(n).sort(function(e,t){var o=n[e];var a=n[t];if(o==a){if(e<t)return-1;if(e>t)return 1}return-(o-a)});var a=9;o.length=Math.min(o.length,4*a);var i=["slightly_smiling_face","heart","+1","100","bug"];var r;while(o.length<5&&i.length){r=i.shift();-1===o.indexOf(r)&&o.push(r)}TS.emoji.spliceSkinToneVariationsIntoAnArrayOfEmojiNames(o);return o};var d=function e(n){t=n;var o=_.find(_.get(TS.model,"emoji_groups"),{name:"mine"});o||TS.emoji.makeMenuLists();var a=[];t.forEach(function(e){var t=h[e];t&&a.push(t)});o.items=a};var m;var f=function e(){m=m||p();return m};var p=function e(){var t={};var n;Object.keys(S.data).forEach(function(e){n=S.data[e];t[n[3][0]]=null;n[3].forEach(function(e){if(t.hasOwnProperty(e))return;t[e]=n[3][0]})});return t};var g=function e(t,n){return!!(S.variations_data[t]&&S.variations_data[t][n])};var S=emoji;var h={};var T=[{name:"people",display_name:TS.interop.i18n.t("People","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_happy_smile"></i></span>',tab_icon:"ts_icon_happy_smile",tab_icon_name:"happy_smile",emoji_names:["grinning","grin","joy","rolling_on_the_floor_laughing","smiley","smile","sweat_smile","laughing","wink","blush","yum","sunglasses","heart_eyes","kissing_heart","kissing","kissing_smiling_eyes","kissing_closed_eyes","relaxed","slightly_smiling_face","hugging_face","star-struck","thinking_face","face_with_raised_eyebrow","neutral_face","expressionless","no_mouth","face_with_rolling_eyes","smirk","persevere","disappointed_relieved","open_mouth","zipper_mouth_face","hushed","sleepy","tired_face","sleeping","relieved","stuck_out_tongue","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","drooling_face","unamused","sweat","pensive","confused","upside_down_face","money_mouth_face","astonished","white_frowning_face","slightly_frowning_face","confounded","disappointed","worried","triumph","cry","sob","frowning","anguished","fearful","weary","exploding_head","grimacing","cold_sweat","scream","flushed","zany_face","dizzy_face","rage","angry","face_with_symbols_on_mouth","mask","face_with_thermometer","face_with_head_bandage","nauseated_face","face_vomiting","sneezing_face","innocent","face_with_cowboy_hat","clown_face","lying_face","shushing_face","face_with_hand_over_mouth","face_with_monocle","nerd_face","smiling_imp","imp","japanese_ogre","japanese_goblin","skull","skull_and_crossbones","ghost","alien","space_invader","robot_face","hankey","smiley_cat","smile_cat","joy_cat","heart_eyes_cat","smirk_cat","kissing_cat","scream_cat","crying_cat_face","pouting_cat","see_no_evil","hear_no_evil","speak_no_evil","baby","child","boy","girl","adult","man","woman","older_adult","older_man","older_woman","male-doctor","female-doctor","male-student","female-student","male-teacher","female-teacher","male-judge","female-judge","male-farmer","female-farmer","male-cook","female-cook","male-mechanic","female-mechanic","male-factory-worker","female-factory-worker","male-office-worker","female-office-worker","male-scientist","female-scientist","male-technologist","female-technologist","male-singer","female-singer","male-artist","female-artist","male-pilot","female-pilot","male-astronaut","female-astronaut","male-firefighter","female-firefighter","male-police-officer","female-police-officer","male-detective","female-detective","male-guard","female-guard","male-construction-worker","female-construction-worker","prince","princess","man-wearing-turban","woman-wearing-turban","man_with_gua_pi_mao","person_with_headscarf","bearded_person","blond-haired-man","blond-haired-woman","man_in_tuxedo","bride_with_veil","pregnant_woman","breast-feeding","angel","santa","mrs_claus","female_mage","male_mage","female_fairy","male_fairy","female_vampire","male_vampire","mermaid","merman","female_elf","male_elf","female_genie","male_genie","female_zombie","male_zombie","man-frowning","woman-frowning","man-pouting","woman-pouting","man-gesturing-no","woman-gesturing-no","man-gesturing-ok","woman-gesturing-ok","man-tipping-hand","woman-tipping-hand","man-raising-hand","woman-raising-hand","man-bowing","woman-bowing","face_palm","man-facepalming","woman-facepalming","shrug","man-shrugging","woman-shrugging","man-getting-massage","woman-getting-massage","man-getting-haircut","woman-getting-haircut","man-walking","woman-walking","man-running","woman-running","dancer","man_dancing","man-with-bunny-ears-partying","woman-with-bunny-ears-partying","woman_in_steamy_room","man_in_steamy_room","woman_climbing","man_climbing","woman_in_lotus_position","man_in_lotus_position","bath","sleeping_accommodation","man_in_business_suit_levitating","speaking_head_in_silhouette","bust_in_silhouette","busts_in_silhouette","fencer","horse_racing","skier","snowboarder","man-golfing","woman-golfing","man-surfing","woman-surfing","man-rowing-boat","woman-rowing-boat","man-swimming","woman-swimming","man-bouncing-ball","woman-bouncing-ball","man-lifting-weights","woman-lifting-weights","man-biking","woman-biking","man-mountain-biking","woman-mountain-biking","racing_car","racing_motorcycle","person_doing_cartwheel","man-cartwheeling","woman-cartwheeling","wrestlers","man-wrestling","woman-wrestling","water_polo","man-playing-water-polo","woman-playing-water-polo","handball","man-playing-handball","woman-playing-handball","juggling","man-juggling","woman-juggling","couple","two_men_holding_hands","two_women_holding_hands","woman-kiss-man","man-kiss-man","woman-kiss-woman","woman-heart-man","man-heart-man","woman-heart-woman","man-woman-boy","man-woman-girl","man-woman-girl-boy","man-woman-boy-boy","man-woman-girl-girl","man-man-boy","man-man-girl","man-man-girl-boy","man-man-boy-boy","man-man-girl-girl","woman-woman-boy","woman-woman-girl","woman-woman-girl-boy","woman-woman-boy-boy","woman-woman-girl-girl","man-boy","man-boy-boy","man-girl","man-girl-boy","man-girl-girl","woman-boy","woman-boy-boy","woman-girl","woman-girl-boy","woman-girl-girl","selfie","muscle","point_left","point_right","point_up","point_up_2","middle_finger","point_down","v","crossed_fingers","spock-hand","the_horns","call_me_hand","raised_hand_with_fingers_splayed","hand","ok_hand","+1","-1","fist","facepunch","left-facing_fist","right-facing_fist","raised_back_of_hand","wave","i_love_you_hand_sign","writing_hand","clap","open_hands","raised_hands","palms_up_together","pray","handshake","nail_care","ear","nose","footprints","eyes","eye","eye-in-speech-bubble","brain","tongue","lips","kiss","cupid","heart","heartbeat","broken_heart","two_hearts","sparkling_heart","heartpulse","blue_heart","green_heart","yellow_heart","orange_heart","purple_heart","black_heart","gift_heart","revolving_hearts","heart_decoration","heavy_heart_exclamation_mark_ornament","love_letter","zzz","anger","bomb","boom","sweat_drops","dash","dizzy","speech_balloon","left_speech_bubble","right_anger_bubble","thought_balloon","hole","eyeglasses","dark_sunglasses","necktie","shirt","jeans","scarf","gloves","coat","socks","dress","kimono","bikini","womans_clothes","purse","handbag","pouch","shopping_bags","school_satchel","mans_shoe","athletic_shoe","high_heel","sandal","boot","crown","womans_hat","tophat","mortar_board","billed_cap","helmet_with_white_cross","prayer_beads","lipstick","ring","gem"]},{name:"nature",display_name:TS.interop.i18n.t("Nature","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_nature"></i></span>',tab_icon:"ts_icon_emoji_nature",tab_icon_name:"emoji_nature",emoji_names:["monkey_face","monkey","gorilla","dog","dog2","poodle","wolf","fox_face","cat","cat2","lion_face","tiger","tiger2","leopard","horse","racehorse","unicorn_face","zebra_face","deer","cow","ox","water_buffalo","cow2","pig","pig2","boar","pig_nose","ram","sheep","goat","dromedary_camel","camel","giraffe_face","elephant","rhinoceros","mouse","mouse2","rat","hamster","rabbit","rabbit2","chipmunk","hedgehog","bat","bear","koala","panda_face","feet","turkey","chicken","rooster","hatching_chick","baby_chick","hatched_chick","bird","penguin","dove_of_peace","eagle","duck","owl","frog","crocodile","turtle","lizard","snake","dragon_face","dragon","sauropod","t-rex","whale","whale2","dolphin","fish","tropical_fish","blowfish","shark","octopus","shell","crab","shrimp","squid","snail","butterfly","bug","ant","bee","beetle","cricket","spider","spider_web","scorpion","bouquet","cherry_blossom","white_flower","rosette","rose","wilted_flower","hibiscus","sunflower","blossom","tulip","seedling","evergreen_tree","deciduous_tree","palm_tree","cactus","ear_of_rice","herb","shamrock","four_leaf_clover","maple_leaf","fallen_leaf","leaves"]},{name:"food_and_drink",display_name:TS.interop.i18n.t("Food & Drink","client")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_food"></i></span>',tab_icon:"ts_icon_emoji_food",tab_icon_name:"emoji_food",emoji_names:["grapes","melon","watermelon","tangerine","lemon","banana","pineapple","apple","green_apple","pear","peach","cherries","strawberry","kiwifruit","tomato","coconut","avocado","eggplant","potato","carrot","corn","hot_pepper","cucumber","broccoli","mushroom","peanuts","chestnut","bread","croissant","baguette_bread","pretzel","pancakes","cheese_wedge","meat_on_bone","poultry_leg","cut_of_meat","bacon","hamburger","fries","pizza","hotdog","sandwich","taco","burrito","stuffed_flatbread","egg","fried_egg","shallow_pan_of_food","stew","bowl_with_spoon","green_salad","popcorn","canned_food","bento","rice_cracker","rice_ball","rice","curry","ramen","spaghetti","sweet_potato","oden","sushi","fried_shrimp","fish_cake","dango","dumpling","fortune_cookie","takeout_box","icecream","shaved_ice","ice_cream","doughnut","cookie","birthday","cake","pie","chocolate_bar","candy","lollipop","custard","honey_pot","baby_bottle","glass_of_milk","coffee","tea","sake","champagne","wine_glass","cocktail","tropical_drink","beer","beers","clinking_glasses","tumbler_glass","cup_with_straw","chopsticks","knife_fork_plate","fork_and_knife","spoon","hocho","amphora"]},{name:"activity",display_name:TS.interop.i18n.t("Activity","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_activities"></i></span>',tab_icon:"ts_icon_emoji_activities",tab_icon_name:"emoji_activities",emoji_names:["jack_o_lantern","christmas_tree","fireworks","sparkler","sparkles","balloon","tada","confetti_ball","tanabata_tree","bamboo","dolls","flags","wind_chime","rice_scene","ribbon","gift","reminder_ribbon","admission_tickets","ticket","medal","trophy","sports_medal","first_place_medal","second_place_medal","third_place_medal","soccer","baseball","basketball","volleyball","football","rugby_football","tennis","8ball","bowling","cricket_bat_and_ball","field_hockey_stick_and_ball","ice_hockey_stick_and_puck","table_tennis_paddle_and_ball","badminton_racquet_and_shuttlecock","boxing_glove","martial_arts_uniform","goal_net","dart","golf","ice_skate","fishing_pole_and_fish","running_shirt_with_sash","ski","sled","curling_stone","video_game","joystick","game_die","spades","hearts","diamonds","clubs","black_joker","mahjong","flower_playing_cards"]},{name:"travel_and_places",display_name:TS.interop.i18n.t("Travel & Places","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_travel"></i></span>',tab_icon:"ts_icon_emoji_travel",tab_icon_name:"emoji_travel",emoji_names:["earth_africa","earth_americas","earth_asia","globe_with_meridians","world_map","japan","snow_capped_mountain","mountain","volcano","mount_fuji","camping","beach_with_umbrella","desert","desert_island","national_park","stadium","classical_building","building_construction","house_buildings","cityscape","derelict_house_building","house","house_with_garden","office","post_office","european_post_office","hospital","bank","hotel","love_hotel","convenience_store","school","department_store","factory","japanese_castle","european_castle","wedding","tokyo_tower","statue_of_liberty","church","mosque","synagogue","shinto_shrine","kaaba","fountain","tent","foggy","night_with_stars","sunrise_over_mountains","sunrise","city_sunset","city_sunrise","bridge_at_night","hotsprings","milky_way","carousel_horse","ferris_wheel","roller_coaster","barber","circus_tent","performing_arts","frame_with_picture","art","slot_machine","steam_locomotive","railway_car","bullettrain_side","bullettrain_front","train2","metro","light_rail","station","tram","monorail","mountain_railway","train","bus","oncoming_bus","trolleybus","minibus","ambulance","fire_engine","police_car","oncoming_police_car","taxi","oncoming_taxi","car","oncoming_automobile","blue_car","truck","articulated_lorry","tractor","bike","scooter","motor_scooter","busstop","motorway","railway_track","fuelpump","rotating_light","traffic_light","vertical_traffic_light","construction","octagonal_sign","anchor","boat","canoe","speedboat","passenger_ship","ferry","motor_boat","ship","airplane","small_airplane","airplane_departure","airplane_arriving","seat","helicopter","suspension_railway","mountain_cableway","aerial_tramway","satellite","rocket","flying_saucer","bellhop_bell","door","bed","couch_and_lamp","toilet","shower","bathtub","hourglass","hourglass_flowing_sand","watch","alarm_clock","stopwatch","timer_clock","mantelpiece_clock","clock12","clock1230","clock1","clock130","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","clock10","clock1030","clock11","clock1130","new_moon","waxing_crescent_moon","first_quarter_moon","moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","crescent_moon","new_moon_with_face","first_quarter_moon_with_face","last_quarter_moon_with_face","thermometer","sunny","full_moon_with_face","sun_with_face","star","star2","stars","cloud","partly_sunny","thunder_cloud_and_rain","mostly_sunny","barely_sunny","partly_sunny_rain","rain_cloud","snow_cloud","lightning","tornado","fog","wind_blowing_face","cyclone","rainbow","closed_umbrella","umbrella","umbrella_with_rain_drops","umbrella_on_ground","zap","snowflake","snowman","snowman_without_snow","comet","fire","droplet","ocean"]},{name:"objects",display_name:TS.interop.i18n.t("Objects","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_lightbulb_o"></i></span>',tab_icon:"ts_icon_lightbulb_o",tab_icon_name:"lightbulb_o",emoji_names:["mute","speaker","sound","loud_sound","loudspeaker","mega","postal_horn","bell","no_bell","musical_score","musical_note","notes","studio_microphone","level_slider","control_knobs","microphone","headphones","radio","saxophone","guitar","musical_keyboard","trumpet","violin","drum_with_drumsticks","iphone","calling","phone","telephone_receiver","pager","fax","battery","electric_plug","computer","desktop_computer","printer","keyboard","three_button_mouse","trackball","minidisc","floppy_disk","cd","dvd","movie_camera","film_frames","film_projector","clapper","tv","camera","camera_with_flash","video_camera","vhs","mag","mag_right","microscope","telescope","satellite_antenna","candle","bulb","flashlight","izakaya_lantern","notebook_with_decorative_cover","closed_book","book","green_book","blue_book","orange_book","books","notebook","ledger","page_with_curl","scroll","page_facing_up","newspaper","rolled_up_newspaper","bookmark_tabs","bookmark","label","moneybag","yen","dollar","euro","pound","money_with_wings","credit_card","chart","currency_exchange","heavy_dollar_sign","email","e-mail","incoming_envelope","envelope_with_arrow","outbox_tray","inbox_tray","package","mailbox","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","postbox","ballot_box_with_ballot","pencil2","black_nib","lower_left_fountain_pen","lower_left_ballpoint_pen","lower_left_paintbrush","lower_left_crayon","memo","briefcase","file_folder","open_file_folder","card_index_dividers","date","calendar","spiral_note_pad","spiral_calendar_pad","card_index","chart_with_upwards_trend","chart_with_downwards_trend","bar_chart","clipboard","pushpin","round_pushpin","paperclip","linked_paperclips","straight_ruler","triangular_ruler","scissors","card_file_box","file_cabinet","wastebasket","lock","unlock","lock_with_ink_pen","closed_lock_with_key","key","old_key","hammer","pick","hammer_and_pick","hammer_and_wrench","dagger_knife","crossed_swords","gun","bow_and_arrow","shield","wrench","nut_and_bolt","gear","compression","alembic","scales","link","chains","syringe","pill","smoking","coffin","funeral_urn","moyai","oil_drum","crystal_ball","shopping_trolley"]},{name:"symbols",display_name:TS.interop.i18n.t("Symbols","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_heart_o"></i></span>',tab_icon:"ts_icon_heart_o",tab_icon_name:"heart_o",emoji_names:["atm","put_litter_in_its_place","potable_water","wheelchair","mens","womens","restroom","baby_symbol","wc","passport_control","customs","baggage_claim","left_luggage","warning","children_crossing","no_entry","no_entry_sign","no_bicycles","no_smoking","do_not_litter","non-potable_water","no_pedestrians","no_mobile_phones","underage","radioactive_sign","biohazard_sign","arrow_up","arrow_upper_right","arrow_right","arrow_lower_right","arrow_down","arrow_lower_left","arrow_left","arrow_upper_left","arrow_up_down","left_right_arrow","leftwards_arrow_with_hook","arrow_right_hook","arrow_heading_up","arrow_heading_down","arrows_clockwise","arrows_counterclockwise","back","end","on","soon","top","place_of_worship","atom_symbol","om_symbol","star_of_david","wheel_of_dharma","yin_yang","latin_cross","orthodox_cross","star_and_crescent","peace_symbol","menorah_with_nine_branches","six_pointed_star","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","twisted_rightwards_arrows","repeat","repeat_one","arrow_forward","fast_forward","black_right_pointing_double_triangle_with_vertical_bar","black_right_pointing_triangle_with_double_vertical_bar","arrow_backward","rewind","black_left_pointing_double_triangle_with_vertical_bar","arrow_up_small","arrow_double_up","arrow_down_small","arrow_double_down","double_vertical_bar","black_square_for_stop","black_circle_for_record","eject","cinema","low_brightness","high_brightness","signal_strength","vibration_mode","mobile_phone_off","female_sign","male_sign","medical_symbol","recycle","fleur_de_lis","trident","name_badge","beginner","o","white_check_mark","ballot_box_with_check","heavy_check_mark","heavy_multiplication_x","x","negative_squared_cross_mark","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","curly_loop","loop","part_alternation_mark","eight_spoked_asterisk","eight_pointed_black_star","sparkle","bangbang","interrobang","question","grey_question","grey_exclamation","exclamation","wavy_dash","copyright","registered","tm","hash","keycap_star","zero","one","two","three","four","five","six","seven","eight","nine","keycap_ten","100","capital_abcd","abcd","1234","symbols","abc","a","ab","b","cl","cool","free","information_source","id","m","new","ng","o2","ok","parking","sos","up","vs","koko","sa","u6708","u6709","u6307","ideograph_advantage","u5272","u7121","u7981","accept","u7533","u5408","u7a7a","congratulations","secret","u55b6","u6e80","black_small_square","white_small_square","white_medium_square","black_medium_square","white_medium_small_square","black_medium_small_square","black_large_square","white_large_square","large_orange_diamond","large_blue_diamond","small_orange_diamond","small_blue_diamond","small_red_triangle","small_red_triangle_down","diamond_shape_with_a_dot_inside","radio_button","black_square_button","white_square_button","white_circle","black_circle","red_circle","large_blue_circle"]},{name:"flags",display_name:TS.interop.i18n.t("Flags","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_flag"></i></span>',tab_icon:"ts_icon_flag",tab_icon_name:"flag",emoji_names:["checkered_flag","triangular_flag_on_post","crossed_flags","waving_black_flag","waving_white_flag","rainbow-flag","flag-ac","flag-ad","flag-ae","flag-af","flag-ag","flag-ai","flag-al","flag-am","flag-ao","flag-aq","flag-ar","flag-as","flag-at","flag-au","flag-aw","flag-ax","flag-az","flag-ba","flag-bb","flag-bd","flag-be","flag-bf","flag-bg","flag-bh","flag-bi","flag-bj","flag-bl","flag-bm","flag-bn","flag-bo","flag-bq","flag-br","flag-bs","flag-bt","flag-bv","flag-bw","flag-by","flag-bz","flag-ca","flag-cc","flag-cd","flag-cf","flag-cg","flag-ch","flag-ci","flag-ck","flag-cl","flag-cm","cn","flag-co","flag-cp","flag-cr","flag-cu","flag-cv","flag-cw","flag-cx","flag-cy","flag-cz","de","flag-dg","flag-dj","flag-dk","flag-dm","flag-do","flag-dz","flag-ea","flag-ec","flag-ee","flag-eg","flag-eh","flag-er","es","flag-et","flag-eu","flag-fi","flag-fj","flag-fk","flag-fm","flag-fo","fr","flag-ga","gb","flag-gd","flag-ge","flag-gf","flag-gg","flag-gh","flag-gi","flag-gl","flag-gm","flag-gn","flag-gp","flag-gq","flag-gr","flag-gs","flag-gt","flag-gu","flag-gw","flag-gy","flag-hk","flag-hm","flag-hn","flag-hr","flag-ht","flag-hu","flag-ic","flag-id","flag-ie","flag-il","flag-im","flag-in","flag-io","flag-iq","flag-ir","flag-is","it","flag-je","flag-jm","flag-jo","jp","flag-ke","flag-kg","flag-kh","flag-ki","flag-km","flag-kn","flag-kp","kr","flag-kw","flag-ky","flag-kz","flag-la","flag-lb","flag-lc","flag-li","flag-lk","flag-lr","flag-ls","flag-lt","flag-lu","flag-lv","flag-ly","flag-ma","flag-mc","flag-md","flag-me","flag-mf","flag-mg","flag-mh","flag-mk","flag-ml","flag-mm","flag-mn","flag-mo","flag-mp","flag-mq","flag-mr","flag-ms","flag-mt","flag-mu","flag-mv","flag-mw","flag-mx","flag-my","flag-mz","flag-na","flag-nc","flag-ne","flag-nf","flag-ng","flag-ni","flag-nl","flag-no","flag-np","flag-nr","flag-nu","flag-nz","flag-om","flag-pa","flag-pe","flag-pf","flag-pg","flag-ph","flag-pk","flag-pl","flag-pm","flag-pn","flag-pr","flag-ps","flag-pt","flag-pw","flag-py","flag-qa","flag-re","flag-ro","flag-rs","ru","flag-rw","flag-sa","flag-sb","flag-sc","flag-sd","flag-se","flag-sg","flag-sh","flag-si","flag-sj","flag-sk","flag-sl","flag-sm","flag-sn","flag-so","flag-sr","flag-ss","flag-st","flag-sv","flag-sx","flag-sy","flag-sz","flag-ta","flag-tc","flag-td","flag-tf","flag-tg","flag-th","flag-tj","flag-tk","flag-tl","flag-tm","flag-tn","flag-to","flag-tr","flag-tt","flag-tv","flag-tw","flag-tz","flag-ua","flag-ug","flag-um","flag-un","us","flag-uy","flag-uz","flag-va","flag-vc","flag-ve","flag-vg","flag-vi","flag-vn","flag-vu","flag-wf","flag-ws","flag-xk","flag-ye","flag-yt","flag-za","flag-zm","flag-zw","flag-england","flag-scotland","flag-wales"]}];var b=function e(){TS.emoji.setUpEmoji()};var v=function e(){if(S.unaltered_data){S.data=JSON.parse(JSON.stringify(S.unaltered_data));S.inits={}}S.ts_init_colons()};var w=function e(){TS.emoji.setEmojiMode();TS.emoji.makeMenuLists();TS.redux&&TS.interop&&TS.interop.redux&&TS.redux.dispatch(TS.interop.redux.features.customEmoji.updateCustomEmoji())};var y=function e(t,n,o){if(!S)return;var a=TS.storage.fetchCustomEmoji();if(!a){TS.interop.utility.getLogger({getState:TS.redux.getState}).error("error_updating_emoji","Attempting to update custom emoji, but no custom emoji data is in local storage");return}if("undefined"===typeof n){delete TS.model.emoji_use[t];if(!a.data.hasOwnProperty(t))return;delete a.data[t];var i=_.remove(TS.model.emoji_map,{name:t});TS.boot_data.feature_emoji_by_id&&i.forEach(function(e){delete TS.model.emoji_map_by_id[e.id]})}else a.data[t]=n;TS.model.emoji_cache_ts=o;TS.storage.storeCustomEmoji({data:a.data,cache_ts:TS.model.emoji_cache_ts});k(a.data)};var k=function e(t){v();TS.emoji.ingestCustoms(t);w()};var j=function e(){var t=TS.model.all_custom_emoji;TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(t=E(t));return t};var x=function e(t){return!!i[t]};var O=function e(t){return TS.prefs&&TS.prefs.getPref(t)};var E=function e(t){return _.filter(t,function(e){return!x(e)})};var C=function e(){var t=TS.ui.frecency.getMostCommonWithPrefix(s,c);t=_.map(t,"id");if(!t.length)return[];var n=TS.emoji.getChosenSkinTone(true);var o=_.keyBy(TS.model.emoji_map,"id");var a=[];return _.chain(t).map(function(e){var t=o[e];if(!t)return null;var i=t.display_name;n&&t.is_skin&&(i=i+"::"+n);var r=h[i];if(!r)return null;if(TS.emoji.emojiHasAliases(r)){var s=r.names.split(" ");for(var l=0;l<s.length;l++){var c=TS.emoji.stripWrappingColons(s[l]);if(_.includes(a,c))return null}}a.push(i);return i}).compact().take(l).value()}})()},Bnag:function(e,t){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}e.exports=n},EbDI:function(e,t){function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}e.exports=n},Ijbi:function(e,t){function n(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}e.exports=n},Qic8:function(e,t,n){var o=n("RIqP");var a=n("lSNA");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),true).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}(function(){var e=window.TS&&TS.raw_templates;var t=window.TS&&TS.raw_template_paths;var n=window.TS&&TS.templates_to_audit;var a=window.TS&&TS.console;var i=0;var s;var l;window.TSM&&window.TSM.interop||console.error("TSM.interop not found, app almost certainly will not boot properly");window.TS={boot_data:{},qs_args:{},pri:0,has_pri:{},console:a,ms:{},interop:window.TSM&&window.TSM.interop,boot:function e(t){TS.interop.debug.exportToGlobalDebugger("teamIds",[t.team_id]);TS.interop.debug.exportToGlobalDebugger("activeTeamId",t.team_id);TS.interop.debug.exportToGlobalDebuggerWithGetter("activeTeam",function(){return window.slackDebug[t.team_id]});I();l=new Promise(function(e){s=e});TS.boot_data=t;TS.qs_args.js_path&&(TS.boot_data.version_ts="local_js");TS.console.onStart();TS.model.api_url=TS.boot_data.api_url;TS.model.async_api_url=TS.boot_data.async_api_url;TS.model.api_token=TS.boot_data.api_token;TS.model.webhook_url=TS.boot_data.webhook_url;TS.boot_data.page_needs_enterprise&&(TS.model.enterprise_api_token=TS.boot_data.enterprise_api_token);TS.interop.console.info("BOOT","booted! pri:"+TS.pri+" version:"+TS.boot_data.version_ts+" start_ms:"+TS.boot_data.start_ms+" ("+(Date.now()-TS.boot_data.start_ms)+"ms ago)");TS.interop.desktop.legacyHasDeviceStorage()&&TS.interop.environment.isSSB()&&TS.interop.desktop.deprecatedSetItem("shouldLogFirstMeaningfulPaint","true");TS.redux.onStart();TS.redux.onStart=_.noop;TS.interop.clog.setup({userId:TS.boot_data.user_id,teamId:TS.boot_data.team_id,enterpriseId:TS.boot_data.enterprise_id,locale:TS.interop.i18n&&TS.interop.i18n.locale});$(document).ready(U)},useReactMessages:function e(){return true},registerModule:function e(t,n,o){V(n);if(j)return TS.error('module "'+t+'" must be registered on before dom ready');if(F[t])return TS.error('module "'+t+'" already exists');var a=f(t,n,"module");if(void 0===a){o?TS.error('module "'+t+'" cannot be registered after delay; "'+t.split(".").slice(0,-1).join(".")+'" is not registered'):P[t]=n;return}n._name=t;F[t]=n},registerComponent:function e(t,n){if(j)return TS.error('component "'+t+'" must be registered on before dom ready');if(B[t])return TS.error('component "'+t+'" already exists');"function"===typeof n&&(n=n());if("function"!==typeof n.destroy)return TS.error('component "'+t+'" cannot be registered as it does not have a destroy method');var o=function e(){this._constructor&&this._constructor.apply(this,arguments);if(!this.id){this.id=t+"_auto_guid_"+i;i+=1}this.test&&p()?this.test=void 0:"function"===typeof this.test&&(this.test=this.test());e._add(this.id,this)};var a=f(t,o,"component");if(void 0===a){N[t]=n;return}var r=n.destroy;n.destroy=function(){o._remove(this.id);r.call(this)};o.prototype=Object.create(n);o.instances={};o._name=t;B[t]=o;o._add=function(e,n){B[t].instances[e]&&TS.warn("A "+t+" component with the instance id "+e+"already exists");B[t].instances[e]=n};o._remove=function(e){B[t].instances[e]=null};o.get=function(e){return B[t].instances[e]};o.getAll=function(){return B[t].instances}},makeLogDate:function e(){if(window.TSMakeLogDate)return TSMakeLogDate();return"(TSMakeLogDate not loaded) "},shouldLog:function e(t){return TS.console.shouldLog(t)},replaceConsoleFunction:function e(t){return TS.console.replaceConsoleFunction(t)},log:function e(t){if(TS.shouldLog(t)){var n=Q(t,"log");var o=Y(t,arguments);TS.interop.console.info(n,[].slice.call(o,0))}},info:function e(){TS.interop.console.info("info",[].slice.call(arguments,0))},maybeWarn:function e(t){TS.console.maybeWarn.apply(this,[].slice.call(arguments,0))},warn:function e(){TS.interop.console.warn([].slice.call(arguments,0))},dir:function e(t,n,o){TS.console.dir.apply(this,[].slice.call(arguments,0))},maybeError:function e(t){TS.console.maybeError.apply(this,[].slice.call(arguments,0))},error:function e(){TS.interop.console.error([].slice.call(arguments,0))},getQsArgsForUrl:function e(t){if(!t&&x)return x;x="";for(var n in TS.qs_args){if("export_test"===n)continue;x+="&"+n+"="+encodeURIComponent(TS.qs_args[n])}return x},getOtherAccountsCount:function e(){var t=0;if(!TS.boot_data.other_accounts)return t;t=Object.keys(TS.boot_data.other_accounts).length;return t},refreshTeams:function e(){m()},reload:function e(t,n,o){if(t){TS.info("TS.reload called: "+t);TS.generic_dialog.start({title:TS.interop.i18n.t("Reloading!","ts")(),body:t,show_cancel_button:false,esc_for_ok:true,onGo:function e(){TS.reload()}});return}n&&(n=JSON.stringify(n));TS.info("TS.reload() called: "+(n||"no reason specified"));TS.console&&TS.console.logStackTrace();window.location.reload(o)},reloadIfLoggedInAndShouldReload:function e(t){if(TS.model.ms_logged_in_once&&t.should_reload){TS.reload(null,"rtm.shouldReload said so");return true}return false},reloadIfVersionsChanged:function e(t){if(TS.model.ms_logged_in_once&&t.min_version_ts&&"dev"!==TS.boot_data.version_ts&&parseInt(TS.boot_data.version_ts,10)<parseInt(t.min_version_ts,10)){TS.reload(null,"parseInt(TS.boot_data.version_ts) < parseInt(data.min_version_ts)");return true}if(TS.model.ms_logged_in_once&&t.cache_version&&t.cache_version!=TS.storage.msgs_version){TS.reload(null,"data.cache_version "+t.cache_version+" != TS.storage.msgs_version "+TS.storage.msgs_version);return true}return false},ensureFullyBooted:function e(){return l},legacyResynced:function e(){E("legacy-resynced").timeout(d).then(function(e){return h({ok:true,args:{},data:e})}).catch(function(){TS.redux.dispatch(TS.interop.redux.features.cfm.incrementMajorVersion())}).finally(function(){TS.interop.topics.resynced()})},test:function e(){var e={_registerDelayedComponentsAndModules:q,_deleteModule:function e(t){delete TS[t];delete F[t]},_deleteComponent:function e(t){delete TS[t];delete B[t]}};return e}};delete window.TSM;var c=TS.interop.utility.addJitter(1e3,0,5);var u=TS.interop.utility.addJitter(3e5,0,1);var d=3e4;var m=_.debounce(function(){if(!TS.boot_data)return;if(!TS.model)return;if(!TS.model.team)return;if(!TS.model.user)return;TS.interop.api.call("auth.currentSessions").then(function(e){var t=e.data;TS.boot_data.other_accounts={};for(var n in t.accounts){if(n==TS.model.user.id)continue;TS.boot_data.other_accounts[n]=t.accounts[n]}}).catch(function(e){if(TS.console&&TS.console.warn&&TS.console.error){TS.warn(8675309,"unable to do anything with refreshTeams rsp");TS.error(8675309,e)}})},c,{maxWait:u});var f=function e(t,n,o){var a=t;var i=TS;var r=a.split(".");var s=r.length-1;if(s>=3)TS.error(o+' "'+a+'" cannot be registered, as we only support a depth of two sub modules right now');else if(s){a=r[s];var l=0;for(l;l<s;l+=1){r[l]||TS.error(o+' "'+t+'" cannot be registered because of a bad name');i=i[r[l]];if(void 0===i)return i}}void 0!==i[a]?TS.error(o+' "'+t+'" cannot be registered; "'+a+'" already exists on "'+(i._name||"TS")+'"'):i[a]=n;return i};if(e){TS.raw_templates=e;e=null}if(t){TS.raw_template_paths=t;t=null}if(n){TS.templates_to_audit=n;n=null}var p=function e(){return!("undefined"!==typeof window.jasmine||"dev"===TS.boot_data.version_ts&&TS.qs_args.export_test)};var g=function e(){var t=S();k=t;if(!y){TS.info("Starting non-incremental boot");return t}var n=y;return n.then(function(e){e.data.emoji_cache_ts=_.get(TS.storage.fetchCustomEmoji(),"cache_ts");e.data.apps_cache_ts=_.get(TS.storage.fetchApps(),"cache_ts");e.data.commands_cache_ts=_.get(TS.storage.fetchCmds(),"cache_ts");e.data.translations_cache_ts=_.get(TS.storage.fetchStaticTranslations(),"cache_ts");return e}).catch(function(){TS.info("Recovering from incremental boot error");k=void 0;return t}).finally(function(){y=void 0})};var S=function e(){if(TS.qs_args.no_rtm_start)return new Promise(function(t,n){TS.resumeRTMStart=function(){delete TS.resumeRTMStart;delete TS.qs_args.no_rtm_start;e().then(function(e){t(e)}).catch(n)}});if(TS.boot_data.rtm_start_response&&!TS.qs_args.no_rtm_start_response){var t=Promise.resolve({ok:true,args:TS.boot_data.rtm_start_response.args,data:TS.boot_data.rtm_start_response.data});delete TS.boot_data.rtm_start_response;return t}return C().then(function(e){TS.has_pri[H]&&TS.log(H,"Flannel: got rtm.start response \ud83d\udc95");return{ok:true,args:{},data:e}})};var h=function e(t){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Got rtm.start login data");TS.model.emoji_cache_ts=t.data.emoji_cache_ts;TS.model.apps_cache_ts=t.data.apps_cache_ts;TS.model.commands_cache_ts=t.data.commands_cache_ts;TS.model.static_translations_cache_ts=t.data.translations_cache_ts;if(!t.data.self){TS.error("No self?");return}if(!t.data.team){TS.error("No team?");return}TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up model");return G(t.data,t.args).then(function(){T(t.data);TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up commands");TS.cmd_handlers.setUpCmds();TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up static translations");TS.i18n.setUpStaticTranslations();TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up UI");b();TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Finding initial channel");TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up emoji and shared channels");return TS.emoji.bootEmoji().timeout(500).catch(Promise.TimeoutError,function(){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Fetching emoji took too long; continuing without waiting for it")}).catch(function(){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up emoji failed, trying to move forward anyway...")})}).then(function(){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Nearly there! Finalizing...");TS.model.ms_logged_in_once||v(t.data);TS.web&&TS.web.onEveryLoginMS(t.data);w();Z(t.data);var e=!TS.model.ms_logged_in_once;if(e&&s){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Divine clementine, we are finalizing a full boot!");s();s=null;TS.interop.desktop.isDesktop&&TS.redux.dispatch(TS.interop.desktop.onWebappBooted());z&&TS.interop.console.info("BOOT","Finished first boot "+Math.ceil(performance.now()-z)+" ms after DOM ready")}TS.model.ms_logged_in_once=true;TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Holy guacamole, we\u2019re all done!");TS.log(123,"User id: "+_.get(TS.boot_data,"user_id")+", team id: "+_.get(TS.model,"team.id"))}).catch(function(e){TS.error("_setUpModel failed with err: "+(e?e.message:"no err provided"));if(!D){D=true;e&&e.message&&TS.interop.utility.getLogger({getState:TS.redux.getState}).error(e,e.message,{subtype:"legacy_setup_model_error"});TS.telemeter.count("setup_model_failed")}TS.dir(e);TS.info(e.stack);TS._last_boot_error=e})};var T=function e(t){if(parseInt(TS.storage.fetchLastEKMChangeTimestamp()||"0",10)<parseInt(t.ekm_clear_cache_ts||"0",10)){if(TS.interop.desktop.isDesktop){TS.interop.console.info("BOOT","EKM clear cache event occurred; clearing file cache");TS.interop.desktop.clearCache()}TS.interop.console.info("BOOT","Updating last_ekm_change_ts in storage to "+t.ekm_clear_cache_ts);TS.storage.storeLastEKMChangeTimestamp(t.ekm_clear_cache_ts)}};var b=function e(){TS.ui.setThemeClasses()};var v=function e(t){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","_finalizeFirstBoot");if(TS.model.ms_logged_in_once){TS.warn("_finalizeFirstBoot called, but we have already done this before. This is a progamming error.");return}TS.web&&TS.web.onFirstLoginMS(t);k=void 0};var w=function e(){if(!TS.interop.Flannel.useSocket()){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS will not connect to MS");return}TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS wants to connect to MS");if(TS.redux.socket.isProvisionallyConnected()){TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS will finalize SocketManager");try{TS.interop.SocketManager.finalizeProvisionalConnection();TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS did finalize SocketManager")}catch(e){TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS failed to finalize SocketManager");TS.interop.utility.getLogger({getState:TS.redux.getState}).error(e,"sm_finalize_failed_2");TS.interop.SocketManager.disconnect()}}else{TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS wanted to finalize SocketManager but it had no provisional connection");if(TS.redux.socket.hasNeverConnected()){"calls"===TS.boot_data.app?TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS: opening our SocketManager connection now"):TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS: we have never had a connection. This should not happen!");C().then(function(e){h({ok:true,args:{},data:e})})}else if(!TS.redux.socket.wasPreviouslyConnected()){TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS: we had a connection but it is gone for some reason; wait for it to come back");TS.redux.socket.provisionallyConnectedSig.addOnce(function(){return e()})}}TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS did connect to MS")};var y;var k;TS.qs_args=function(){var e=location.search.substring(1);var t={};var n;n=e.split("&");for(var o=0;o<n.length;o+=1){var a=n[o].indexOf("=");if(-1!=a){var i=n[o].substring(0,a);var r=n[o].substring(a+1);t[i]=unescape(r)}else n[o].length&&(t[n[o]]="")}return t}();TS.pri=TS.qs_args.pri?TS.qs_args.pri+",0":TS.pri;_.each(TS.pri&&TS.pri.split(","),function(e){e&&(TS.has_pri[e]=true)});var j=false;var x;var O=function e(){TS.redux.socket.connectedSig.addOnce(function(){TS.redux.socket.provisionallyConnectedSig.add(function(){TS.info("Successfully fetched start data; processing it");E("legacy-provisionally-connected").then(function(e){return h({ok:true,args:{},data:e})})})})};var E=function e(t){return k||TS.redux.dispatch(TS.interop.boot.data.getStartData({reason:t}))};var C=function e(){if(!TS.redux.socket.hasNeverConnected()){var t=new Error("_connectAndFetchStartDataWithSocketManager can only be called if Socket Manager has never connected");TS.interop.utility.getLogger({getState:TS.redux.getState}).error(t,"_connectAndFetchStartDataWithSocketManager called too many times");return Promise.reject(t)}A();return E("legacy-boot")};var A=function e(){TS.has_pri["1996"]=true;TS.interop.Eventlog.createInstanceForTeam(TS.boot_data.team_id);TS.interop.SocketManager.start(TS.boot_data.api_token)};var M=function e(t){TS.interop.Flannel.useSocket()&&O();R();(TS.interop.environment.isDev||TS.interop.environment.isQa)&&$("html").attr("data-qa-ready",true);j=true;TS.model.is_our_app&&K();TS.ui.setUpWindowUnloadHandlers();"client"===TS.boot_data.app||"web"!==TS.boot_data.app&&"space"!==TS.boot_data.app&&"calls"!==TS.boot_data.app||TS.web.gogogo();"client"!==TS.boot_data.app&&"space"!==TS.boot_data.app&&"calls"!==TS.boot_data.app||TS.interop.activity_session.listenForUserEvents();if(TS.boot_data.no_login){TS.info("running without a user");TS.web&&TS.web.no_login_complete_sig.dispatch()}else t?h(t):TS.error("_initialDataFetchesComplete expected to receive rtm.start data; we cannot continue.")};var L=function e(){if(!window.sessionStorage)return;try{var t="session_load_count_web";var n=parseInt(sessionStorage.getItem(t)||0,10)+1;sessionStorage.setItem(t,n);TS.log(123,t+": "+n);TS.telemeter.store(t,n,{is_count:true})}catch(e){TS.warn("could not log session load count: "+e)}};var I=function e(){window.devtoolsFormatters=window.devtoolsFormatters||[];window.devtoolsFormatters.push({header:function e(t){if(!t||!t._is_interop_channel_object||!window._)return null;var n=_.omitBy(_.assign({},t),_.isNil);return["object",{object:n}]},hasBody:function e(){return false}})};var F={};var P={};var B={};var N={};var z;var D=false;var U=function e(){z=performance.now();TS.log(123,"_onDOMReady");L();if(window.desktop&&desktop.downloads){TS.model.supports_downloads=true;TS.model.flex_names.push("downloads")}soundManager.setup({debugMode:false});TS.storage.onStart();q();TS.redux.members.onStart();TS.redux.members.onStart=_.noop;TS.interop.setTeamIdForToken(TS.boot_data.api_token,TS.boot_data.team_id);if(TS.interop&&TS.interop.console&&TS.interop.console.setRedactionEnabled){var t=!TS.boot_data.feature_tinyspeck;TS.interop.console.setRedactionEnabled(t)}var n=TS.boot_data.no_login?Promise.resolve():g();var o=[W(),n];TS.boot_data.page_needs_enterprise&&!TS.boot_data.no_login&&o.push(TS.redux.teams.fetchAndUpsertEnterpriseOrgInfo());Promise.all(o).then(function(){n.then(M);return null})};var W=function e(){if(window.TS&&TS.raw_templates&&Object.keys(TS.raw_templates).length){if(!TS.boot_data.feature_tinyspeck)return Promise.resolve();if(TS.raw_template_paths&&Object.keys(TS.raw_template_paths).length&&TS.templates_to_audit&&Object.keys(TS.templates_to_audit).length)return Promise.resolve()}var t;t=TS.boot_data.hbs_templates_version&&"dev"!==TS.boot_data.version_ts?TS.boot_data.hbs_templates_version:"dev"===TS.boot_data.version_ts?Date.now():TS.boot_data.version_ts;var n="/templates.php?cb="+t+TS.getQsArgsForUrl();TS.boot_data.template_groups&&(n+="&template_groups="+TS.boot_data.template_groups);TS.boot_data.template_exclude_feature_flagged&&(n+="&template_exclude_feature_flagged=1");if(/&locale=[a-zA-Z-]/.test(n)){n=n.replace(/\?locale=[a-zA-Z-]*&/,"?").replace(/[?|&]locale=[a-zA-Z-]*/,"");n=n.replace(/&locale=[a-zA-Z-]/,"")}TS.interop.i18n.locale&&TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(n+="&locale="+TS.interop.i18n.locale);var o=0;function a(){o+=1;return new Promise(function(e){if(window.TS&&TS.raw_templates&&Object.keys(TS.raw_templates).length){if(!TS.boot_data.feature_tinyspeck){e();return}if(TS.raw_template_paths&&Object.keys(TS.raw_template_paths).length&&TS.templates_to_audit&&Object.keys(TS.templates_to_audit).length){e();return}}TS.utility.getCachedScript(n).done(function(){if(0==Object.keys(TS.raw_templates).length){TS.error(n+" returned no templates D:");return}e()}).fail(function(e,t,i){var r=Math.min(1e3*o,1e4);TS.warn("loading "+n+" failed (textStatus:"+t+" errorThrown:"+i+" attempts:"+o+"), trying again in "+r+"ms");setTimeout(a,r)})})}return a()};var q=function e(){_.sortBy(Object.keys(P),"length").forEach(function(e){TS.registerModule(e,P[e],true)});_.sortBy(Object.keys(N),"length").forEach(function(e){TS.registerComponent(e,N[e],true)})};var R=function e(){TS.log(Date.now()-TS.boot_data.start_ms+"ms from first html to calling onStarts()");if("client"===TS.boot_data.app);else if("web"===TS.boot_data.app||"space"===TS.boot_data.app||"calls"===TS.boot_data.app){TS.web.onStart();TS.web.onStart=_.noop}else{if("test"===TS.boot_data.app)return;if("api"!==TS.boot_data.app&&"oauth"!==TS.boot_data.app){TS.error("WTF app? "+TS.boot_data.app);return}}var t;var n=!TS.qs_args.keep_onstart;try{_.forOwn(F,function(e){if(!e.onStart)return;t=e._name;e.onStart();n&&(e.onStart=_.noop)})}catch(e){TS.error("TS."+t+".onStart encountered an error:");TS.interop.utility.getLogger({getState:TS.redux.getState}).error(e);window.TSBeacon&&window.TSBeacon("call_onstarts_error",1);throw e}n&&(R=_.noop)};var G=function e(t,n){return new Promise(function(e,a){var i=!TS.model.ms_logged_in_once;t.team.activity=[];t.team.url=t.url;if(t.team.prefs){TS.redux.prefs.setTeamPrefs(t.team.prefs);delete t.team.prefs}TS.boot_data.enterprise_prefs&&TS.redux.prefs.setEnterprisePrefs(TS.boot_data.enterprise_prefs);TS.redux.teams.upsertTeam(t.team);TS.members.legacyUpsertAndSignal(r({},t.self,{is_self:true}));TS.boot_data.page_needs_enterprise&&void 0!==t.can_manage_shared_channels&&TS.prefs.setTeamPrefLocal("can_user_manage_shared_channels",t.can_manage_shared_channels);TS.model.last_team_name||(TS.model.last_team_name=TS.model.team.name);if(i){TS.model.read_only_channels=[];TS.model.thread_only_channels=[];TS.model.non_threadable_channels=[]}TS.prefs.setPrefs(t.prefs||t.self.prefs);t.self.prefs&&delete t.self.prefs;var s;var l;var c;var u=["args.cache_ts:"+n.cache_ts];var d=_.clone(n);d.token&&(d.token="REDACTED");try{u.push("api args: "+JSON.stringify(d))}catch(e){u.push("api args: "+d)}TS.members.legacyStartBatchUpsert();var m=t.users||[];var f=t.bots||[];var p={};for(s=0;s<m.length;s+=1)p[m[s].id]=true;for(s=0;s<m.length;s+=1){l=TS.members.legacyUpsertAndSignal(m[s]);c=l.member;TS.has_pri[J]&&TS.log(J,"upsert from DATA: "+c.id+" "+l.status)}var g={};for(s=0;s<f.length;s+=1)g[f[s].id]=true;TS.redux.bots.bulkUpsertBots(f);u.push("members from updated_users in rtm.start:"+m.length+" (slackbot will always be here)");u.push("bots from updated_bots in rtm.start:"+f.length);m.length<TS.model.members.length/20&&(TS.model.did_we_load_with_user_cache=true);var S;TS.qs_args.debug_slackbot&&(S=true);S&&TS.info("debug_slackbot: _setUpModel(): data_user_list, data_bot_list",m,f);g=null;p=null;TS.log(123,u.join("\n"));if(!TS.model.user){TS.error("No TS.model.user - Expected user with id: "+_.get(t,"self.id","#"));TS.log(u.join("\n"));a(Error("No TS.model.user"));return}TS.members.legacyFinishBatchUpsert();TS.prefs.setHighlightWords(TS.prefs.getPref("highlight_words"));if(t.subteams){TS.interop.userGroups.clearAllUserGroupMembership();TS.interop.userGroups.bulkAddUserGroupMembership({userGroups:o(t.subteams.self),isMember:true})}t.read_only_channels&&(TS.model.read_only_channels=t.read_only_channels);t.non_threadable_channels&&(TS.model.non_threadable_channels=t.non_threadable_channels);t.thread_only_channels&&(TS.model.thread_only_channels=t.thread_only_channels);TS.model.initial_msgs_cnt=42;if(TS.qs_args.api_count){var h=parseInt(TS.qs_args.api_count,10)||TS.model.initial_msgs_cnt;TS.model.initial_msgs_cnt=Math.min(TS.model.initial_msgs_cnt,h)}var T=TS.model.hard_msg_limit;TS.model.subsequent_msgs_cnt=Math.min(T,2*TS.model.initial_msgs_cnt);TS.model.special_initial_msgs_cnt=Math.min(T,2*TS.model.initial_msgs_cnt);TS.log(123,"initial_msgs_cnt:"+TS.model.initial_msgs_cnt+" subsequent_msgs_cnt:"+TS.model.subsequent_msgs_cnt+" special_initial_msgs_cnt:"+TS.model.special_initial_msgs_cnt);var b=function e(){TS.redux.socket.isConnected()&&TS.redux.dispatch(TS.interop.redux.features.cfm.incrementMajorVersion());TS.utility.msgs.startBatchUnreadCalc();TS.telemeter.mark("upsert_channels_start");var n=_.map(t.channels,function(e){if(!TS.interop.rules.channels.isPublicChannel(e)&&!TS.interop.rules.channels.isPrivateChannel(e))return e;var n=false;var o=false;var a=false;t.read_only_channels&&(n=t.read_only_channels.indexOf(e.id)>-1);t.thread_only_channels&&(o=t.thread_only_channels.indexOf(e.id)>-1);t.non_threadable_channels&&(a=t.non_threadable_channels.indexOf(e.id)>-1);return r({},e,{is_read_only:n,is_thread_only:o,is_non_threadable:a})});TS.telemeter.measureAndClear("upsert_channels_start","upsert_channels");var o=_.compact(n);TS.redux.channels.bulkAddEntities(o);TS.interop&&TS.interop.ChannelSidebar&&TS.interop.ChannelSidebar.ensureRowInView();TS.utility.msgs.finishBatchUnreadCalc();if(S){var a=TS.redux.channels.getImByMemberId("USLACKBOT");var i=TS.interop.members.getMemberById("USLACKBOT");TS.info("debug_slackbot: non-incremental boot\nTS.redux.channels.getImByMemberId('USLACKBOT') => "+(a?"OK \ud83c\udf89":"NOT FOUND \ud83d\udc7b")+"\nTS.interop.members.getMemberById('USLACKBOT') => "+(i?"OK \ud83c\udf89":"NOT FOUND \ud83d\udc7b"));a&&TS.info("debug_slackbot: slackbot_im",a.toJSON&&a.toJSON()||a);i&&TS.info("debug_slackbot: slackbot_member",i.toJSON&&i.toJSON()||i);a||TS.warn("debug_slackbot: TS.redux.channels.getImByMemberId(`USLACKBOT`): No IM found?")}};b();TS.redux.dispatch(TS.interop.redux.models.paidFeatures.setPaidFeatures(t.paid_features||[]));e()})};var V=function e(t){if(t.test&&!t.__esModule&&p())delete t.test;else if("function"===typeof t.test){var n=t.test;Object.defineProperty(t,"test",{get:n})}};V(TS);var K=function e(){var t=false;var n=function e(){TS.info("sleep event!");t=true};var o=function e(){if(!t)return;t=false;TS.info("wake event! version:"+TS.boot_data.version_ts+" start_ms:"+TS.boot_data.start_ms)};window.addEventListener("sleep",n,false);window.addEventListener("wake",o,false)};var H=1989;var J=481;var Q=function e(t,n){var o=n;t&&_.isNumber(t)?o=""+t:"log"===n&&(o="info");return o};var Y=function e(t,n){var o=Array.prototype.slice.call(n);t&&_.isNumber(t)&&o.shift();return o};var Z=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var n=t.channels,o=t.ims,a=t.mpims,i=t.groups,r=t.self,s=t.team;var l=_([n,o,a,i]).flatten().map("id").value();var c=[r.id];var u=[s.id];TS.interop.channels.markObjectsAsFresh(l);TS.interop.members.markObjectsAsFresh(c);TS.interop.teams.markObjectsAsFresh(u)};_.noop()})()},RIqP:function(e,t,n){var o=n("Ijbi");var a=n("EbDI");var i=n("Bnag");function r(e){return o(e)||a(e)||i()}e.exports=r},RsIA:function(e,t){(function(){TS.registerModule("i18n",{onStart:function e(){TS.interop.i18n.getReverseKeyCodeMap();TS.prefs&&TS.prefs.keyboard_changed_sig.add(o);window.signals?TS.i18n.keyboard_changed_sig=new signals.Signal:TS.i18n.keyboard_changed_sig={add:function e(){},remove:function e(){},dispatch:function e(){}}},keyboard:function t(){if(!e)if(TS.interop.desktop.legacyCanAutoGetKeyboard()){e=TS.interop.i18n.normalizeKeyboardFromDesktop(desktop.app.getLocaleInformation().currentKeyboardLayout);desktop.app.onDidChangeKeyboardLayout(n)}else{if(!TS.prefs.prefs_loaded)return"us";e=TS.prefs.getPref("keyboard")||"us"}if("en-US"===e)return"us";return e},sendButtonEnabled:function e(){return TS.prefs&&TS.prefs.getPref("msg_input_send_btn")},setUpStaticTranslations:function e(){return t()},getStaticTranslation:function e(t,n){if(!a())return null;var o=TS.storage.fetchStaticTranslations();var i=_.get(o,"data."+n);if(!i||!i[t])return null;return i[t]}});var e;var t=function e(){if(a())return Promise.resolve();return TS.interop.api.call("i18n.translations.get").then(function(e){var t=e.data;if(!t||!t.ok){TS.error("Failed to fetch static i18n translations, recieved this response: ",e);return}TS.model.static_translations_cache_ts=t.cache_ts;TS.storage.storeStaticTranslations({data:t,cache_ts:TS.model.static_translations_cache_ts,locale:t.locale})})};var n=function t(n){e=TS.interop.i18n.normalizeKeyboardFromDesktop(n);TS.i18n.keyboard_changed_sig.dispatch()};var o=function t(){if(!TS.model.is_our_app){e=TS.prefs.getPref("keyboard");TS.i18n.keyboard_changed_sig.dispatch()}};var a=function e(){var t=TS.storage.fetchStaticTranslations();if(!t)return false;if(TS.model.static_translations_cache_ts!==t.cache_ts)return false;if(TS.interop.i18n.locale!==t.locale)return false;return true}})()},VoEv:function(e,t){(function(){TS.registerModule("statsd",{onStart:function e(){var t=3e4;var n=5e3;var o=Math.floor(Math.random()*n);setInterval(a,t+o);$(window).on("beforeunload",a)},count:function e(t,n){_.isUndefined(n)&&(n=1);o(t,"count",n)},timing:function e(t,n){o(t,"timing",n)},flush:function e(){a()},mark:function e(t){TS.telemeter.mark(t)},clearMarks:function e(t){TS.telemeter.clearMarks(t)},measure:function e(t,n,o){var a=TS.telemeter.measure(n,t,o,{ephemeral:true});if(_.isNaN(a)||_.isUndefined(a))return;TS.statsd.timing(t,a);return a},measureAndClear:function e(t,n){var o=TS.statsd.measure(t,n);TS.statsd.clearMarks(n);return o},test:function e(){var t={getStats:function e(){return n},reset:function e(){n=[]}};Object.defineProperty(t,"_record",{get:function e(){return o},set:function e(t){o=t}});Object.defineProperty(t,"_sendDataAndEmptyQueue",{get:function e(){return a},set:function e(t){a=t}});return t}});var e=2e3;var t;var n=[];var o=function e(t,o,a){var i;if("count"===o){i=" (count)";a=_.round(a,0)}else{if("timing"!==o){TS.error("TS.statsd._record called with invalid type: "+o);return}i="ms";a=_.round(a,3)}r(t)&&TS.info("[STATSD "+o.toUpperCase()+"] "+t+": "+a+i);n.push({stat:t,type:o,value:a})};var a=function t(){if(!n.length)return;var o=[];var a=[];var s="";var l=function e(t){return i()+"?stats="+encodeURIComponent(JSON.stringify(t))};n.forEach(function(t){a.push(t);s=l(a);if(s.length>e){a.pop();o.push(l(a));a=[t]}});o.push(l(a));o.forEach(function(e){var t=new Image;t.src=e});r()&&TS.info("[STATSD] Sending data: "+JSON.stringify(n));n=[]};var i=function e(){if(t)return t;if(TS.environment.is_dev){var n=location.host.match(/^([^.]+\.)?(?:enterprise\.)?((dev|qa)[0-9]*)\.slack\.com/)[2];t="https://"+n+".slack.com/beacon/statsd"}else t=location.host.match(/staging.slack.com/)?"https://staging.slack.com/beacon/statsd":location.host.match(/staging-master.slack.com/)?"https://staging-master.slack.com/beacon/statsd":location.host.match(/staging-release.slack.com/)?"https://staging-release.slack.com/beacon/statsd":"https://slack.com/beacon/statsd";return t};var r=function e(t){if(!t)return TS.qs_args.log_timings||true===TS.statsd.log;return TS.qs_args.log_timings||TS.qs_args.log_timing===t||true===TS.statsd.log||TS.statsd.log===t||TS.statsd.log instanceof Array&&-1!==TS.statsd.log.indexOf(t)}})()},bREN:function(e,t){(function(){TS.registerModule("redux",{onStart:function e(){var t;t=TS.boot_data.page_needs_org_admin_dashboard_store?TS.interop.orgAdmin.configureOrgAdminStore({orgId:o()}):TS.interop.redux.configureStore({teamOrEnterpriseId:o(),reducers:TS.interop.redux.defaultReducers,middlewares:TS.interop.redux.getMiddlewares(TS.interop.redux.clientMiddlewares)});n(t)},bindSelectorToStore:function t(n){if(!n)throw new Error("bindSelectorToStore: selector is undefined.");return function(t,o,i,r,s,l,_){if(!e){TS.console.error("Attempting to use a redux selector before the redux store is initialized, returning undefined instead. Selector is: "+n);return}var c=a(n);if(!c){TS.console.error("Selector "+n+" cannot be found. Either it doesn't exist or it hasn't yet been initialized. Returning undefined instead");return}if(c&&c.length>7)throw new Error("bindSelectorToStore only supports selectors accepting up to 7 parameters. This should be more than enough for any use case");return c.call(void 0,TS.redux.getState(),t,o,i,r,s,l,_)}},getState:function t(){var n=e&&e.getState&&e.getState();if(!n){TS.error("No redux state found. The redux store must not be initialized yet");TS.console.logStackTrace("Logging a stack trace to determine what is trying to access redux too early")}return n},getStoreInstance:function t(){if(!e){TS.error("No redux store found. The redux store must not be initialized yet");TS.console.logStackTrace("Logging a stack trace to determine what is trying to access redux too early")}return e},dispatch:function t(n){if(n&&e&&e.dispatch)return e.dispatch(n);if(!n){TS.error("No action provided?");return}TS.error("No dispatch function available. The redux store must not be initialized yet");TS.console.logStackTrace("Logging a stack trace to determine what is trying to access redux too early")},test:{onStart:function e(){n(window.slackCreateTestStore({teamOrEnterpriseId:o()}))}}});var e;var t={};function n(t){e=t;TS.redux.dispatch(TS.interop.redux.features.experiments.bulkAddExperiments(TS.boot_data.experiment_assignments));TS.redux.dispatch(TS.interop.bootData.setBootData(TS.boot_data));TS.interop.desktop.isDesktop&&i();TS.boot_data.enterprise_id&&TS.redux.dispatch(TS.interop.redux.actions.setEnterpriseId({id:TS.boot_data.enterprise_id}))}function o(){return TS.boot_data.team_id||"NO_TEAM_ID"}function a(e){var n=t[e];if(n)return n;n=_.get(window,e);if(!n)return;t[e]=n;return n}function i(){TS.redux.dispatch(TS.interop.redux.createDesktopDelegate());var e=TS.interop.redux.getDelegateForLegacy((window.desktopDelegates||window.desktop.delegates)[o()]);_.assign(TS.interop,{webapp:e});_.assign(TSSSB,e)}})()},cDf5:function(e,t){function n(e){n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return n(e)}function o(t){"function"===typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=o=function e(t){return n(t)}:e.exports=o=function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)};return o(t)}e.exports=o},cYWi:function(e,t){(function(){TS.registerModule("telemeter",{onStart:function e(){TS.web&&TS.web.login_sig.add(TS.telemeter.onLogin)},onLogin:function e(){TS.interop.telemeter.start()},start:function e(){TS.interop.telemeter.start()},mark:function e(t){TS.interop.getTelemeter().mark(t)},getLatestMark:function e(t){return TS.interop.getTelemeter().getLatestMark(t)},clearMarks:function e(t){TS.interop.getTelemeter().clearMarks(t)},measure:function e(t,n,o,a){return TS.interop.getTelemeter().measure(t,n,o,a)},measureAndClear:function e(t,n){return TS.interop.getTelemeter().measureAndClear(t,n)},store:function e(t,n,o){return TS.interop.getTelemeter().store(t,n,o)},count:function e(t,n){TS.interop.getTelemeter().count(t,n)},flush:function e(){TS.interop.getTelemeter().sendDataAndEmptyQueue()}})})()},lGk4:function(e,t){(function(){TS.registerModule("ssb",{openNewFileWindow:function e(t,n){o&&TS.log(o,"TS.ssb.openNewFileWindow url: "+n);return false},closeWindow:function e(){if(!window.is_in_ssb)return false;window.close();return true},setUpAtomSSBWin:function e(t){n(t,"window.is_in_ssb = true;");TS.shouldLog(438)&&!t._has_console&&(t._has_console=1)},upsertFileInSSBParentWin:function n(a){if(!TS.web)return;if(document.ssb_main)document.ssb_main.TS&&document.ssb_main.TS.files.upsertAndSignal(a,"upsertFileInSSBParentWin");else if(window.desktop&&window.opener&&window.opener.executeJavaScript){o&&TS.log(o,"calling _executeInAtomSSBParentWin for TS.files.upsertAndSignal");t("TS.files.upsertAndSignal("+e(a)+");")}}});var e=function e(t){return"JSON.parse('"+JSON.stringify(t||null)+"')"};var t=function e(t,n){return TS.interop.desktop.legacyExecuteJavaScriptInParentWindow({code:t,callback:n})};var n=function e(t,n,o){return TS.interop.desktop.legacyExecuteJavaScriptInWindow({window_token:t.token,code:n,callback:o})};var o=438})()},lSNA:function(e,t){function n(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true}):e[t]=n;return e}e.exports=n},rV0I:function(e,t){(function(){TS.registerModule("model",{did_we_load_with_user_cache:false,did_we_load_with_emoji_cache:false,did_we_load_with_app_cache:false,did_we_load_with_cmd_cache:false,api_url:"",api_token:"",async_api_url:"",webhook_url:"",user:null,team:null,can_add_ura:null,ims:null,channels:null,groups:null,mpims:null,members:null,rooms:null,bots:null,user_groups:null,idp_groups:null,apps:{},files:[],requested_channel_joins:{},archives_and_recreated_groups:{},last_team_name:"",initial_cid:"",enterprise:null,initial_unread_view:false,initial_threads_view:false,initial_app_space_view:false,initial_search_view:false,initial_page_view:false,RESERVED_KEYWORDS:["channel","here","everyone","slackbot","siackbot","canal","aqu\xed","aqui","todos","m\xed","mi","hier","alle","cha\xeene","chaine","ici","tous","\u30c1\u30e3\u30f3\u30cd\u30eb","\u3053\u3053","\u5168\u54e1"],NAMED_VIEWS:[{id:"Vall_unreads",name:TS.interop.i18n.t("All Unreads","model")(),is_view:true},{id:"Vall_threads",name:TS.interop.i18n.t("Threads","threads")(),alt_names:[TS.interop.i18n.t("New Threads","threads")()],is_view:true},{id:"Vapp_space",name:TS.interop.i18n.t("Apps","model")(),is_view:true}],unsent_msgs:{},display_unsent_msgs:{},inline_img_byte_limit:2097152,inline_img_pixel_limit:36152320,last_reads_set_by_client:{},ms_logged_in_once:false,window_unloading:false,active_cid:null,last_active_cid:null,active_group_id:null,active_channel_id:null,active_im_id:null,active_mpim_id:null,active_history:[],all_custom_emoji:[],user_hiddens:[],user_colors:{},emoji_use:{},at_channel_suppressed_channels:null,push_at_channel_suppressed_channels:null,loud_channels:null,never_channels:null,loud_channels_set:null,push_loud_channels:null,push_mention_channels:null,push_loud_channels_set:null,your_user_group_regex:{},channel_sort:"alphabetical",inline_attachments:{},inline_imgs:{},inline_videos:{},inline_others:{},inline_audios:{},expandable_state:{},native_video_embed_height:320,native_video_embed_height_flexpane:240,native_media_preload_limit_bytes:2097152,is_msg_rate_limited:false,initial_msgs_cnt:50,subsequent_msgs_cnt:100,special_initial_msgs_cnt:100,hard_msg_limit:500,all_unread_cnt:0,all_unread_highlights_cnt:0,all_unread_cnt_to_exclude:0,all_unread_highlights_cnt_to_exclude:0,threads_has_unreads:false,threads_mention_count:0,threads_mention_counts:{},c_name_in_url:"",flex_name_in_url:"",flex_extra_in_url:"",flex_names:["files","team","search","stars","mentions","details","whats_new","convo","apps","calendar","shortcuts","groups"],default_flex_name:"files",ui_state:null,input_history:null,input_history_index:-1,input_cursor_positions:{},previewed_file_id:null,last_previewed_file_id:null,previewed_member_name:null,previewed_member_id:null,last_previewed_member_id:null,previewed_user_group_id:null,last_previewed_user_group_id:null,channel_name_max_length:80,channel_purpose_max_length:250,channel_topic_max_length:250,upload_file_size_limit_bytes:1073741824,model_ob_id_length:9,msg_activity_interval:5,menu_is_showing:false,overlay_is_showing:false,unread_view_is_showing:false,threads_view_is_showing:false,app_space_view_is_showing:false,search_view_is_showing:false,seen_onboarding_this_session:false,seen_welcome_2:true,showing_welcome_2:false,cancelled_welcome_2_this_session:false,show_inline_img_size_pref_reminder:false,shown_inline_img_size_pref_reminder_once:false,last_key_down_e:null,group_prefix:"",ms_conn_log:[],mac_ssb_version:TS.interop.environment.mac_ssb_version,mac_ssb_version_minor:TS.interop.environment.mac_ssb_version_minor,mac_ssb_build:TS.interop.environment.mac_ssb_build,win_ssb_version:TS.interop.environment.win_ssb_version,win_ssb_version_minor:TS.interop.environment.win_ssb_version_minor,lin_ssb_version:TS.interop.environment.lin_ssb_version,lin_ssb_version_minor:TS.interop.environment.lin_ssb_version_minor,desktop_app_version:TS.interop.environment.desktop_app_version,supports_downloads:false,supports_spaces_in_windows:false,supports_growl_subtitle:false,supports_voice_calls:false,supports_video_calls:false,supports_screen_sharing:false,supports_screenhero:false,supports_mmap_minipanel_calls:false,active_file_list_filter:"all",active_file_list_member_filter:"all",file_list_types:null,shift_key_pressed:false,insert_key_pressed:false,alt_key_pressed:false,num_lock_pressed:false,caps_lock_pressed:false,join_leave_subtypes:["channel_leave","channel_join","group_leave","group_join"],file_list_type_map:{all:TS.interop.i18n.t("All File Types","model")(),posts:TS.interop.i18n.t("Posts","model")(),spaces:TS.interop.i18n.t("Posts","model")(),docs:TS.interop.i18n.t("Posts","model")(),snippets:TS.interop.i18n.t("Snippets","model")(),emails:TS.interop.i18n.t("Emails","model")(),images:TS.interop.i18n.t("Images","model")(),videos:TS.interop.i18n.t("Videos","model")(),pdfs:TS.interop.i18n.t("PDF Files","model")(),spreadsheets:TS.interop.i18n.t("Spreadsheets","model")(),gdocs:TS.interop.i18n.t("Google Docs","model")()},marked_reasons:{viewed:"viewed",left:"left",esc:"esc",esc_all:"esc_all",closed:"closed",muted:"muted",back:"back",sent:"sent",clicked:"clicked",deleted:"deleted",none_qualify:"none_qualify"},welcome_model_ob:{},change_channels_when_offline:true,ampersands_are_inconsistent_in_from_urls:true,ui:{cached_file_preview_scroller_rect:null,cached_msgs_scroller_rect:null,cached_msgs_scroll_result:null,cached_search_scroller_rect:null,cached_archives_scroller_rect:null,cached_archive_scroll_result:null,cached_convo_scroller_rect:null,cached_unread_scroller_rect:null,cached_threads_scroller_rect:null,is_window_focused:!!(document.hasFocus&&document.hasFocus()),is_mouse_down:false,last_flex_extra:null,active_tab_id:null,active_tab_ts:null,debug_channel_lists:true,last_top_msg:null},client:{reads:[],last_user_active_timestamp:new Date},emoji_groups:[],emoji_names:[],emoji_map:[],emoji_map_by_id:{},emoji_complex_customs:null,frecency_jumper:{},pdf_viewer_enabled:true,onStart:function e(){var t=[];TS.model.is_electron&&TS.model.is_mac&&TS.interop.desktop.isMainWindowFrameless()&&t.push("is_electron_mac");TS.model.is_electron&&t.push("is_electron");$("html").addClass(t.join(" "));TS.model.supports_growl_subtitle=!!(TS.model.mac_ssb_version&&TS.interop.environment.isSSBAndAtLeastVersion("2.2"));var n=false;Object.defineProperty(TS.model,"dialog_is_showing",{get:function e(){return n},set:function e(t){n=t},enumerable:true,configurable:true});TS.model.supports_voice_calls=TS.model.is_our_app&&TS.interop.environment.isSSBAndAtLeastVersion("2.5.2")||TS.model.is_chrome_desktop;TS.model.supports_video_calls=TS.model.supports_voice_calls;TS.model.supports_screen_sharing=TS.model.is_our_app&&TS.model.supports_voice_calls;TS.model.supports_screenhero=false;TS.model.supports_mmap_minipanel_calls=false;if(window.desktop&&desktop.calls&&desktop.calls.requestCapabilities){var o=desktop.calls.requestCapabilities();if(o){o.supports_screenhero&&!o.is_mas&&(TS.model.supports_screenhero=true);o.supports_mmap_minipanel&&(TS.model.supports_mmap_minipanel_calls=true)}}TS.model.supports_spaces_in_windows=false;window.desktop&&desktop.window&&desktop.window.list&&(TS.model.supports_spaces_in_windows=true);TS.boot_data.special_flex_panes&&_.forOwn(TS.boot_data.special_flex_panes,function(e){TS.model.flex_names.push(e.flex_name)});var a=TS.storage.fetchExpandableState();TS.model.expandable_state=a;Object.defineProperty(TS.model,"active_cid",{get:function e(){var t=TS.interop.workspace.getPrimaryView();return TS.interop.utility.looksLikeChannelId(t)?t:null},set:function e(){return false}});Object.defineProperty(TS.model,"active_channel_id",{get:function e(){var t=TS.interop.workspace.getPrimaryView();var n=TS.redux.channels.getEntityById(t,false);return n&&n.is_channel&&n.id||null},set:function e(){return false}});Object.defineProperty(TS.model,"active_im_id",{get:function e(){var t=TS.interop.workspace.getPrimaryView();var n=TS.redux.channels.getEntityById(t,false);return n&&n.is_im&&n.id||null},set:function e(){return false}});Object.defineProperty(TS.model,"active_group_id",{get:function e(){var t=TS.interop.workspace.getPrimaryView();var n=TS.redux.channels.getEntityById(t,false);return n&&n.is_group&&!n.is_mpim&&n.id||null},set:function e(){return false}});Object.defineProperty(TS.model,"active_mpim_id",{get:function e(){var t=TS.interop.workspace.getPrimaryView();var n=TS.redux.channels.getEntityById(t,false);return n&&n.is_mpim&&n.is_group&&n.id||null},set:function e(){return false}});Object.defineProperty(TS.model,"unread_view_is_showing",{get:function e(){return TS.interop.utility.PRIMARY_VIEWS.allUnreads===TS.interop.workspace.getPrimaryView()},set:function e(){return false}});Object.defineProperty(TS.model,"threads_view_is_showing",{get:function e(){return TS.interop.utility.PRIMARY_VIEWS.allThreads===TS.interop.workspace.getPrimaryView()},set:function e(){return false}});Object.defineProperty(TS.model,"search_view_is_showing",{get:function e(){return TS.interop.utility.PRIMARY_VIEWS.search===TS.interop.workspace.getPrimaryView()},set:function e(){return false}})},addProfilingKeyTime:function e(t,n){if(!n||!t)return;TS.model.profiling_key_times||(TS.model.profiling_key_times=[]);TS.model.profiling_key_times.push({name:t,ms:n})},incrementUnknownIdHandled:function t(n){e[n]=e[n]||{tries:0,state:0};var o=e[n];o.tries+=1;o.state=0;o.tries>2?TS.maybeError(48,'calling the API for id: "'+n+'", try #'+o.tries):o.tries>1?TS.maybeWarn(48,'calling the API for id: "'+n+'", try #'+o.tries):TS.log(48,'calling the API for id: "'+n+'", try #'+o.tries);return o.tries},reportResultOfUnknownIdHandled:function t(n,o){var a=e[n];if(!a)return;a.state=o?1:-1;1==a.state?TS.log(48,'API call for id: "'+n+'" SUCCEEDED, try #'+a.tries):TS.maybeWarn(48,'API call for id: "'+n+'" FAILED, try #'+a.tries)},logUnknownIdsHandled:function e(t,o){var a=n(t,o);TS.info("_unknown_ids_handled: "+JSON.stringify(a,null,2))},getUnknownIdsHandled:function e(t,o){return n(t,o)},test:function e(){return{getOSXVersion:a,isWin7Plus:o,sniffUserAgent:i}},getBroadcastKeywordById:function e(t){var n=_.find(TS.interop.broadcast_keywords.getAllBroadcastKeywords(),{id:t});if(!n){TS.warn("no broadcast_keyword ob found for "+t);return}return n},getViewById:function e(t){var n=_.find(TS.model.NAMED_VIEWS,{id:t});if(!n){TS.warn("no view ob found for "+t);return}return n},isSSB:function e(){return TS.model.is_our_app},legacyGetYourUserGroupRegExp:function e(){return TS.model.your_user_group_regex}});_.merge(TS.model,i(navigator.userAgent));var e={};var t=[-1,0,1];var n=function n(o,a){o=parseInt(o,10)||1;a=_.includes(t,a)?a:"any";var i={};Object.keys(e).forEach(function(t){var n=e[t];if(o>n.tries)return;if("any"!==a&&n.state!=a)return;i[t]=e[t]});return{state:a,min_tries:o,count:Object.keys(i).length,obs:i}};function o(e){var t=e.match(/Windows NT ([0-9]+\.[0-9]+)\b/);if(!t||t.length<2)return false;return parseInt(t[1],10)>=6}function a(e){var t=e.match(/(?:Mac OS X )([0-9][0-9]_[0-9]+)(_[0-9])?/);t||(t=e.match(/(?:Mac OS X )([0-9][0-9]\.[0-9]+)(\.[0-9])?/));if(!t||!t[1])return 0;return t[1].replace("_",".")}function i(e){var t=/(OS X)/g.test(e);var n=-1!==e.indexOf("Windows");var i=/(WOW64|Win64)/g.test(e);var r=-1!==e.indexOf("Linux");var s=-1!==e.indexOf("CrOS");var l=/(iPad|iPhone|iPod)/g.test(e);var _=/(Android)/g.test(e);var c=/(Edge)/g.test(e);var u=/(Chrome)/g.test(e)&&!c;var d=u&&(l||_);var m=/(Slack)/g.test(e);var f=/(MSIE|Trident)/g.test(e);var p=/(Firefox)/g.test(e);var g=/(Safari)/g.test(e);return{is_iOS:l,is_IE:f,is_FF:p,is_edge:c,is_chrome_desktop:u&&!d&&!m,is_chrome_mobile:d,is_safari_desktop:g&&!u&&t&&!l,is_mac:t,mac_version:a(e)||void 0,is_win:n,is_win_64:i,is_win_7_plus:o(e),is_lin:r,is_cros:s,is_our_app:m,is_electron:m}}})()},"sl+y":function(e,t,n){var o=n("cDf5");(function(){var e=function e(t,n){var o=_.get(window,"TS.model.team.id")||_.get(window,"TS.boot_data.team_id","none");var a=_.get(window,"TS.model.user.id")||_.get(window,"TS.boot_data.user_id","none");var i={description:n,error_json:JSON.stringify(t),team:o,user:a,version:TS.boot_data.version_ts};$.post(TS.boot_data.beacon_error_url,i)};var t=function e(t,n,o){if(!window.console||!console[t])return;var a=TS.qs_args.clean_log;var r=null!==n;o=Array.prototype.slice.call(o);if(r){if(!TS.console.shouldLog(n))return;o.splice(0,1)}o=_.map(o,function(e){return i(e)});var s=true;var l=o.length;while(s&&l){l-=1;s="string"===typeof o[l]}if(a&&"error"!==t&&(n!==parseInt(TS.qs_args.pri,10)||!r))return;if(s){var c=TS.makeLogDate();r&&!a&&(c+="[** "+n+" **]");o.unshift(c);console[t](o.join(" "))}else console[t].apply(console,o)};window.TS||(window.TS={});TS.console={onStart:function e(){TS.console.setAppropriatePri(true);TS.console.watchForErrors()},count:function e(){t("count",null,arguments)},dir:function e(t,n,o){if(!window.console||!console.dir)return;if(t&&!TS.shouldLog(t))return;o=o||"";n=i(n);var a=parseInt(TS.qs_args.dir_json,10);if(a){var r=1==a?"2000":a;try{var s=JSON.stringify(n,null,"  ");if(s.length>r)throw new Error("too long");console.info(TS.makeLogDate()+"[** "+t+" **] "+o+" "+s);return}catch(e){if("too long"!==e){console.info(TS.makeLogDate()+"[** "+t+" **] "+o+" "+n);return}}}try{var l=_.cloneDeep(n);console.info(TS.makeLogDate()+"[** "+t+" **] "+o+" \ud83d\udc47");console.dir(l)}catch(e){TS.warn("could not dir ob:"+n+" err:"+e)}},error:function e(){t("error",null,arguments)},group:function e(){t("group",null,arguments)},groupCollapsed:function e(){t("groupCollapsed",null,arguments)},groupEnd:function e(){t("groupEnd",null,arguments)},maybeError:function e(n){t("error",n,arguments)},getStackTrace:function e(){var t="dev"===_.get(TS,"boot_data.version_ts")||_.get(TS,"qs_args.js_path");var n=(new Error).stack;if(t){var o=new Error;var a=Promise.resolve();if(_.isFunction(a._attachExtraTrace)){a._attachExtraTrace(o);n=o.stack||"";var i=n.split("\n");if(i.length&&i.indexOf("From previous event:")>=0){var r=i.indexOf("From previous event:")+1;n=[i[0]].concat(i.slice(r)).join("\n")}}}var s;s=n?n.split&&n.split("\n")||["[could not parse stack]",n]:["no stacktrace available"];s=_.filter(s,function(e){if(0===e.indexOf("Error"))return false;return e.trim().length&&-1===e.indexOf("StackTrace")});s=_.map(s,function(e){return e.trim()});var l=s.join("\n");return l},info:function e(){t("info",null,arguments)},log:function e(n){t("log",n,arguments)},logStackTrace:function e(t){var n=_.isUndefined(t)?"":t+"\n";TS.console.info(n+"Stacktrace: \u21b4\n",TS.console.getStackTrace())},logStackTraceToBackEnd:function t(n,o,a){if(!o||!n||_.isUndefined(a)){TS.console.warn("Invalid parameters, will not log stack trace");return}var i=TS.console.getStackTrace();var r=_.get(i.split("\n"),"[1]")||"(unknown)";TS.telemeter.count(o+"_v"+a);var s={message:n+". Immediate caller: "+r,stack:i};var l=r.match(/\((.+):(\d+:\d+)\)/);if(l&&3==l.length){s.fileName=l[1];s.lineNumber=l[2]}var c=o+"_caller_v"+a;e(s,c)},profile:function e(){t("profile",null,arguments)},profileEnd:function e(){t("profileEnd",null,arguments)},replaceConsoleFunction:function e(n){var o=t;t=n;return o},setAppropriatePri:function e(t){var o="";TS.qs_args.pri&&(o+=TS.qs_args.pri);if(t&&TS.boot_data.client_logs_pri){""!==o&&(o+=",");o+=TS.boot_data.client_logs_pri}if(TS.model&&TS.prefs&&TS.prefs.prefs_loaded&&TS.prefs.getPref("client_logs_pri")){""!==o&&(o+=",");o+=TS.prefs.getPref("client_logs_pri")}""!==o&&(o+=",");o+="0";TS.pri=_.uniq(o.split(",")).join(",");n()},shouldLog:function e(t){var n=String(TS.pri).split(",");if(-1!==n.indexOf("all")||-1!==n.indexOf("*"))return true;if(-1!==n.indexOf(String(t)))return true;return"undefined"!==typeof TS.has_pri[t]},table:function e(){t("table",null,arguments)},time:function e(){t("time",null,arguments)},timeEnd:function e(){t("timeEnd",null,arguments)},timeStamp:function e(){t("timeStamp",null,arguments)},warn:function e(){t("warn",null,arguments)},maybeWarn:function e(n){t("warn",n,arguments)},watchForErrors:function e(){if(!TS.boot_data||!TS.boot_data.feature_beacon_js_errors)return;TS.interop&&TS.interop.registerGlobalErrorHandler&&TS.interop.registerGlobalErrorHandler()},trace:function e(){t("trace",null,arguments)},maybeTrace:function e(n){t("trace",n,arguments)},test:function e(){return{_maybeRedactFields:i}}};var n=function e(){var t=String(TS.pri).split(",");TS.has_pri=_(Object.keys(TS.boot_data.client_logs||{})).filter(function(e){var n=TS.boot_data.client_logs[e];return t.some(function(e){if("*"===e)return true;if(n.numbers.indexOf(parseInt(e,10))>-1)return true;if(n.name&&n.name.indexOf(e)>-1)return true;if(n.owner&&n.owner.indexOf(e)>-1)return true;return false})}).map(function(e){if(parseInt(e,10)>=0)return parseInt(e,10);return e}).keyBy(function(e){return e}).value()};var a={name:1,name_normalized:1,_name_lc:1,real_name:1,_real_name_lc:1,real_name_normalized:1,_real_name_normalized_lc:1,display_name:1,_display_name_lc:1,display_name_normalized:1,_display_name_normalized_lc:1,first_name:1,_first_name_lc:1,last_name:1,_last_name_lc:1,preferred_name:1,full_name:1,purpose:1,topic:1,emoji_use:1,frecency_ent_jumper:1,frecency_ent_jumper_backup:1,frecency_jumper:1,highlight_words:1,custom_contact_email:1,custom_status_presets:1,email:1,fields:1,skype:1,status_text:1,title:1,src:1,text:1,msgs:1,downloadUrl:1,token:1,enterprise_api_token:1,team_url:1,team_name:1};var i=function e(t,n){if(!TS.boot_data||TS.boot_data.feature_tinyspeck||"dev"===TS.boot_data.version_ts)return t;if(!t||!_.isObject(t))return t;n?n+=1:n=1;if(n>=10)return t;var o;o=_.isArray(t)?[]:{};_.each(t,function(t,i){a[i]?o[i]="[redacted "+r(t)+"]":o[i]=e(t,n)});return o};var r=function(e){var t={};return function(n){var a=o(n);if(null===n)return"null";if(n===e)return"global";if("object"!==a)return a;if(n.nodeType)return"DOM node";var i=t[a={}.toString.call(n)]||(t[a]=a.slice(8,-1).toLowerCase());return i}}(this)})()},to8z:function(e,t){(function(){TS.registerModule("environment",{is_apple_webkit:false,is_dev:false,is_retina:false,retina_changed_sig:new signals.Signal,supports_sticky_position:false,supports_custom_scrollbar:false,slim_scrollbar:false,supports_line_clamp:false,supports_intersection_observer:false,onStart:function e(){c();i();u()},doesSupportStickyPosition:function e(){return TS.environment.supports_sticky_position},test:function e(){var t={_decoratePageWithSupport:i,_initialSetup:c};Object.defineProperty(t,"cssPropertySupported",{get:function e(){return r},set:function e(t){r=t}});Object.defineProperty(t,"cssValueSupported",{get:function e(){return s},set:function e(t){s=t}});return t}});var e=["-webkit-","-moz-","-o-","-ms-",""];var t=["Webkit","Moz","O","ms",""];var n=new RegExp("^(-*"+e.slice(0,e.length-1).join("|-*")+")");var o=new RegExp("^("+t.slice(0,t.length-1).join("|")+")");function a(){return window.devicePixelRatio>1}function i(){var e=["is_apple_webkit","supports_sticky_position","supports_custom_scrollbar","slim_scrollbar","supports_line_clamp"];var t=_.partition(e,function(e){return TS.environment[e]});var n=$("html");n.addClass(t[0].join(" "));n.removeClass(t[1].join(" "))}function r(e){if("scrollbar"===e)return d();var a=document.createElement("css_property_supported").style;e=e.replace(o,"").replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").replace(n,"").toLowerCase();e=_.camelCase(e,"-");var i=_.upperFirst(e);if(void 0!==a[e])return true;return t.some(function(t){return void 0!==a[t+i]||void 0!==a[t+e]})}function s(t,o){var a=document.createElement("css_value_supported");o=o.replace(n,"").toLowerCase();a.style.cssText=t+":"+e.join(o+";"+t+":")+o+";";return!!a.style.length}function l(){TS.environment.supports_sticky_position=s("position","sticky");"Chrome"===window.bowser.name&&parseInt(window.bowser.version,10)<57&&a()&&(TS.environment.supports_sticky_position=false);TS.redux.dispatch(TS.interop.redux.models.environment.setSupportsStickyPosition(TS.environment.supports_sticky_position))}function c(){TS.environment.is_apple_webkit=!!(TS.model.mac_ssb_version||TS.model.is_safari_desktop);TS.environment.is_dev="dev"===TS.boot_data.version_ts;TS.environment.is_retina=a();TS.environment.supports_custom_scrollbar=r("scrollbar");TS.environment.slim_scrollbar=TS.environment.supports_custom_scrollbar&&TS.boot_data.feature_slim_scrollbar;TS.environment.supports_line_clamp=r("line-clamp");TS.environment.supports_intersection_observer="function"===typeof IntersectionObserver;l()}function u(){if(window.matchMedia){var e="screen and (-webkit-min-device-pixel-ratio: 1.5), screen and (min--moz-device-pixel-ratio: 1.5), screen and (min-device-pixel-ratio: 1.5)";window.matchMedia(e).addListener(function(){var e=TS.environment.is_retina;TS.environment.is_retina=a();if(TS.environment.is_retina===e)return;TS.info("TS.environment.is_retina changed from "+e+" to "+TS.environment.is_retina);TS.environment.retina_changed_sig.dispatch(TS.environment.is_retina);l();i()})}}function d(){var e=document.createElement("div");e.id="__sb";e.style.overflow="scroll";e.style.width="40px";e.style.height="40px";e.style.position="absolute";e.style.left="-40px";e.innerHTML="&shy;<style>#__sb::-webkit-scrollbar {width:10px;}</style>";document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth===10;document.body.removeChild(e);return t}})()},uyPQ:function(e,t){(function(){TS.registerModule("ui.file_share",{handleDraghoverstartFromWinSSB:function e(){$(window).trigger("draghoverstart",[null,true])},handleDraghoverendFromWinSSB:function e(){$(window).trigger("draghoverend")},handleDropFromWinSSB:function e(){},preselected:[],bindFileShareDropdowns:function n(i,r,s,l){var c=$("#select_share_channels");var u="60%";if(1!=c.length){alert("error: "+c.length+" $('#select_share_channels')s");return}TS.ui.file_share.preselected=s||[];t=i;var d=TS.ui.file_share.promiseToGetFileShareSelectOptions;l&&(d=a);e={append:true,single:true,data_promise:d,approx_item_height:30,tab_to_nav:true,placeholder_text:TS.interop.i18n.t("Search channels and people ...","files"),template:function e(t){return new Handlebars.SafeString(TS.templates.file_sharing_channel_row({item:t.model_ob}))},onItemAdded:o,onListHidden:function e(){$("#select_share_channels .lfs_list_container").removeClass("new_channel_container")},renderDividerFunc:function e(t,n){if(n.create_channel){t.html(TS.interop.i18n.t('<span class="new">No items matched <strong>{query}</strong></span>',"files")({query:TS.interop.i18n.safeString(_.escape(n.label))}));$("#select_share_channels .lfs_list_container").addClass("new_channel_container");return}$("#select_share_channels .lfs_list_container").removeClass("new_channel_container");t.html(_.escape(n.label)).removeClass("new_channel_not_found")},setValue:function e(t){var n;var o;var a=this.data.length;var i;for(n=0;n<a;n+=1){i=this.data[n].children.length;for(o=0;o<i;o+=1)if(this.data[n].children[o].model_ob.id===t){this.$container.find('.lfs_item[data-lfs-id="'+[n,o]+'"]').trigger("click");return}}}};c.lazyFilterSelect(e);c.css({width:u});c.one("remove",function(){t=false;$(this).lazyFilterSelect("destroy")});$("#file_sharing_div").on("keydown",function(e){13==e.keyCode&&e.stopPropagation()})},promiseToGetFileShareSelectOptions:function e(n){var o=i();return TS.searcher.search(n,{members:{include_self:true},channels:{include_archived:false,can_post:true},groups:{include_archived:false},mpims:true,sort:{allow_empty_query:true}}).then(function(e){var a=false;e.all_items_fetched=true;e.filter(function(e){return TS.interop.utility.looksLikeMemberId(e.model_ob.id)?TS.permissions.members.canUserSeeMember(e.model_ob):TS.permissions.members.canPostInChannel(e.model_ob)}).forEach(function(e){e.lfs_id=e.model_ob.id;e.preselected=r(e.model_ob.id,o);e.preselected&&(a=true)});var i=false;o&&(TS.interop.utility.looksLikeMemberId(o)?i=TS.redux.channels.getImByMemberId(o):TS.interop.utility.looksLikeChannelId(o)&&(i=TS.redux.channels.getEntityById(o)));if(!n&&!a&&i)if(_.get(i,"is_im")){var l=TS.interop.members.getMemberById(i.user);e.push({preselected:true,lfs_id:l.id,model_ob:l})}else i&&TS.permissions.members.canPostInChannel(i)&&e.push({preselected:true,lfs_id:i.id,model_ob:i});if(i){TS.ui.share_message_dialog.maybeToggleSharedChannelsWarning(t,i);s(i)}return e})},bindFileShareShareToggle:function e(){$("#share_cb").bind("click.toggle_select_list",function(){$(this).prop("checked")?$(".file_share_select").prop("disabled",false):$(".file_share_select").prop("disabled",true);TS.ui.file_share.updateAtChannelWarningNote();TS.ui.file_share.updateAtChannelBlockedNote()})},bindFileShareCommentField:function e(){$("#file_comment_textarea").bind("keyup",function(){TS.ui.file_share.updateAtChannelWarningNote();TS.ui.file_share.updateAtChannelBlockedNote()})},updateAtChannelWarningNote:function e(t){var o=TS.utility.contenteditable.value($("#file_comment_textarea"));var a;var i=$("#select_share_channels").lazyFilterSelect("value")[0];var r;i&&(a=i.model_ob.id||"");var s=$("#select_share_at_channel_note");if(TS.ui.needToShowAtChannelWarning(a,o)){var l=TS.format.cleanMsg(o);var c="";var u=true;TS.interop.messages.atEveryoneRegExp.test(l)?c="everyone":TS.interop.messages.atChannelRegExp.test(l)?c="channel":TS.interop.messages.atGroupRegExp.test(l)&&(c="group");var d=TS.redux.channels.getEntityById(a);d&&!d.is_im||(u=false);if(u&&!n(d)&&!t){var m=TS.interop.memberCounts.getOrFetchMemberCounts(d.id);if(m.promise){r=0;m.promise.then(TS.ui.file_share.updateAtChannelWarningNote);u=false}else{r=_.get(m,"counts.member_count",1);r-=1}}var f=[];if(_.isUndefined(r)&&u&&d&&!d.is_im){f=_(d.members).map(function(e){return TS.interop.members.getMemberById(e)}).compact().filter(TS.utility.members.isMemberNonBotNonDeletedNonSelf).sortBy(TS.interop.members.memberSorterByName).value();f.length<1&&(u=false)}if(u){var p=TS.templates.at_channel_warning_note({keyword:c,member_count:_.isUndefined(r)?f.length:r});s.html(p);s.removeClass("hidden");return}}s.addClass("hidden")},updateAtChannelBlockedNote:function e(){var t=TS.utility.contenteditable.value($("#file_comment_textarea"));var n;var o=$("#select_share_channels").lazyFilterSelect("value")[0];var a=$("#share_cb");var i=0===a.length||a.is(":checked");o&&i&&(n=o.model_ob.id);var r=$("#select_share_at_channel_blocked_note");var s=$(".modal .btn.dialog_go");var l;TS.interop.utility.looksLikeMemberId(n)||(l=TS.ui.needToBlockAtChannelKeyword(t,null,n));if(l){r.html(TS.templates.at_channel_blocked_note({keyword:l}));r.removeClass("hidden");s.addClass("disabled")}else{r.addClass("hidden");s.removeClass("disabled")}},shouldBlockUploadDialogSubmission:function e(){var t=TS.utility.contenteditable.value($("#file_comment_textarea"));var n;var o=$("#select_share_channels").lazyFilterSelect("value")[0];var a=$("#share_cb");var i=0===a.length||a.is(":checked");o&&i&&(n=o.model_ob.id);var r;TS.interop.utility.looksLikeMemberId(n)||(r=TS.ui.needToBlockAtChannelKeyword(t,null,n));if(r){TS.info("Can't submit dialog because comment contains "+r);return true}return false},fileShowPublicUrlDialog:function e(t){var n=l(t);if(!n||!n.public_url_shared)return;var o=$('<input type="text" id="public_url" class="full_width small">').attr("value",n.permalink_public)[0].outerHTML;var a=TS.interop.i18n.t("Public link to this file","files")();TS.generic_dialog.start({title:a,body:o,show_cancel_button:false,show_close_button:true,show_secondary_go_button:true,secondary_go_button_class:"btn_outline",secondary_go_button_text:TS.interop.i18n.t("Revoke","files")(),show_go_button:true,go_button_text:TS.interop.i18n.t("Done","files")(),esc_for_ok:true,onSecondaryGo:function e(){TS.ui.file_share.fileRevokePublicLink(n.id)},onGo:function e(){TS.generic_dialog.cancel()},onShow:function e(){TS.generic_dialog.div.on("shown",function e(){TS.generic_dialog.div.off("shown",e);$("#public_url").select().focus().on("keydown",function(e){e.which==TS.utility.keymap.esc&&TS.generic_dialog.cancel()})})}})},fileRevokePublicLink:function e(t){var n=TS.files.getFileById(t);if(!n)return false;var o=TS.interop.i18n.t("Revoke public file link","files")();var a='<p class="no_bottom_margin">'+TS.interop.i18n.t("This will disable the Public Link for this file. This will cause any previously shared links to stop working.<br /><br />Are you sure you want to revoke this public link?","files")()+"</p>";TS.generic_dialog.start({title:o,body:a,go_button_text:TS.interop.i18n.t("Revoke it","files")(),go_button_class:"btn_warning",onGo:function e(){TS.files.upsertAndSignal({id:n.id,public_url_shared:false},"revokePublicLink");TS.interop.api.callExpedited("files.revokePublicURL",{file:n.id})}})},test:function e(){var e={};Object.defineProperty(e,"_author",{get:function e(){return t},set:function e(n){t=n}});Object.defineProperty(e,"_populateDisabledInputMsg",{get:function e(){return s},set:function e(t){s=t}});Object.defineProperty(e,"_haveAllMembersForModelOb",{get:function e(){return n},set:function e(t){n=t}});return e}});var e={};var t=false;var n=function e(t){if(t.is_channel&&!t.is_group)return false;var n=t.members||[t.user];var o=_.map(TS.model.members,"id");return!_.difference(n,o).length};var o=function e(n){$("#select_share_channels .lfs_input_container").removeClass("error");if(n.model_ob.create_channel){$("#select_share_channels_note").removeClass("hidden");$("#select_share_channels .lfs_value .lfs_item").addClass("new_channel_item");$(".modal .dialog_go").text(TS.interop.i18n.t("Next","files")());TS.telemeter.count("share_picker_create_clicked");return}$("#select_share_channels .lfs_value .lfs_item").removeClass("new_channel_item");$(".modal .dialog_go").text(TS.interop.i18n.t("Share","files")());var o;o=n.model_ob.id;if(!o)return;$("#share_model_ob_id").val(o);$("#select_share_channel_warning, #select_share_channels_join_note").addClass("hidden");var a=n.model_ob||{};TS.interop.utility.looksLikeMemberId(a.id)&&(a=TS.redux.channels.getImByMemberId(a.id)||a);TS.ui.share_message_dialog.maybeToggleSharedChannelsWarning(t,a);s(a);var i=TS.interop.rules.channels.isExternallySharedChannel(a)||t&&TS.interop.members.isExternal(t);if(i){$('label[for="file_comment_textarea"]').addClass("subtle_silver");TS.utility.contenteditable.disable($("#file_sharing_div #file_comment_textarea"));$("#select_share_at_channel_list").addClass("subtle_silver")}else{$('label[for="file_comment_textarea"]').removeClass("subtle_silver");TS.utility.contenteditable.enable($("#file_sharing_div #file_comment_textarea"));$("#select_share_at_channel_list").removeClass("subtle_silver")}var r=TS.interop.rules.channels.getConnectedTeamIds(TS.redux.getState(),a);if(TS.interop.rules.channels.isExternallySharedChannel(a)&&r&&r.length){$("#select_share_channel_warning").removeClass("hidden");var l=TS.interop.i18n.safeString(TS.interop.i18n.listify(_.map(r,TS.teams.getTeamNameById)).join(""));$("#select_share_channel_warning_text").html(TS.interop.i18n.t("<strong>This is a shared channel.</strong> Messages and files sent here will be seen by members of <strong>{shared_teams_list}</strong>.","shared_channels")({shared_teams_list:l}))}if(a.is_im||a.is_mpim)$("#share_context_label").text(TS.interop.i18n.t("Share with","files")());else{$("#share_context_label").text(TS.interop.i18n.t("Share in","files")());a.is_channel&&!a.is_member&&$("#select_share_channels_join_note").removeClass("hidden")}$("#share_cb").prop("checked",true);if(!i){TS.ui.file_share.updateAtChannelWarningNote();TS.ui.file_share.updateAtChannelBlockedNote()}};var a=function e(t){return TS.ui.file_share.promiseToGetFileShareSelectOptions(t).then(function(e){$("#select_share_channels .lfs_list_container").removeClass("new_channel_container");if(0===e.length){var n=TS.utility.channels.getPermissibleChannelName(t);if(n){e.push({lfs_group:true,label:t,create_channel:true,children:[{lfs_id:"c."+n,model_ob:{create_channel:true,name:n}}]});$("#select_share_channels .lfs_list_container").addClass("new_channel_container");TS.telemeter.count("share_picker_create_shown")}}return e})};var i=function e(){var t=TS.shared.legacyGetActiveModelOb();if(t)return t.id;return null};var r=function e(t,n){return TS.ui.file_share.preselected.length?TS.ui.file_share.preselected.indexOf(t)>-1:t===n};var s=function e(n){if(!_.isObject(n))return;TS.interop.utility.looksLikeMemberId(n.id)&&(n=TS.redux.channels.getImByMemberId(n.id)||n);var o="";o=t&&TS.interop.members.isExternal(t)?TS.interop.i18n.t("Only members of {team_name} can comment on this file.","shared_channels")({team_name:TS.teams.getTeamNameByMember(t)}):n.is_channel||n.is_group?TS.interop.i18n.t("Comments are disabled in shared channels.","shared_channels")():TS.interop.i18n.t("Comments are disabled when sharing with another\xa0workspace.","shared_channels")();$("#file_comment_textarea").attr("data-disabled-text",o)};var l=function e(t){return _.isString(t)?TS.files.getFileById(t):t}})()},w8u4:function(e,t,n){"use strict";n.r(t);var o=n("sl+y");var a=n.n(o);var i=n("Qic8");var r=n.n(i);var s=n("bREN");var l=n.n(s);var _=n("cYWi");var c=n.n(_);var u=n("VoEv");var d=n.n(u);var m=n("RsIA");var f=n.n(m);var p=n("rV0I");var g=n.n(p);var S=n("to8z");var h=n.n(S);var T=n("7pQh");var b=n.n(T);var v=n("lGk4");var w=n.n(v);var y=n("0MN+");var k=n.n(y);var j=n("uyPQ");var x=n.n(j)}},[["w8u4","webpack.manifest"]]]);